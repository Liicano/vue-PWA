{"remainingRequest":"/home/desarrollo/Escritorio/unabasev4/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/desarrollo/Escritorio/unabasev4/src/pages/incomes/incomes.vue?vue&type=style&index=0&id=1b17611e&lang=scss&scoped=true&","dependencies":[{"path":"/home/desarrollo/Escritorio/unabasev4/src/pages/incomes/incomes.vue","mtime":1552581285832},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#tabla_ventas {\n  display: none;\n}\n\n@media (min-width: 992px) {\n  .md-hide-big {\n    display: none;\n  }\n}\n\n.md-layout-item {\n  padding-right: 0px;\n  padding-left: 0px;\n}\n\n.md-tabs {\n  margin-bottom: 24px;\n}\n.spinner {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  // position: fixed;\n  align-items: center;\n  justify-content: center;\n}\n.pendingClass {\n  border-color: #ffd600;\n  border-style: ridge;\n}\n.successClass {\n  border-color: #00c853;\n  border-style: ridge;\n}\n\n.md-list-item-content {\n  padding: 0 !important;\n}\n.md-list-item .md-list-item-container .md-ripple {\n  padding: 0 !important;\n}\n",{"version":3,"sources":["incomes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0SA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"incomes.vue","sourceRoot":"src/pages/incomes","sourcesContent":["<template>\n  <div>\n    <div>\n      <div v-if=\"getErrors\">\n        <error-modal :errorObject=\"getErrors\"></error-modal>\n      </div>\n\n      <!-- LISTA -->\n      <div class=\"md-layout\">\n        <div class=\"md-layout-item md-size-10F0 md-xsmall-size-100\" style=\"padding: 0 !important\">\n          <div v-if=\"loading\">\n            <spinner></spinner>\n          </div>\n          <center v-if=\"!incomes.docs\"></center>\n          <ul v-else class=\"collection\" style=\"padding: 0; border-style: none;\">\n            <div class=\"container-fluid\" v-if=\"getIncomes.docs.length <= 0\">\n              <center class=\"spinner\">\n                <md-empty-state\n                  md-icon=\"add_shopping_cart\"\n                  md-label=\"Crea tu primera venta\"\n                  md-description=\"Crea tu primera venta dando click al boton de abajo.\"\n                >\n                  <router-link\n                    :to=\"{path:'/income'}\"\n                    class=\"md-success md-raised md-simple\"\n                    tag=\"md-button\"\n                  >Nueva venta</router-link>\n                </md-empty-state>\n              </center>\n            </div>\n            <div v-else>\n              <transition-group name=\"slide-fade\">\n                <li\n                  class=\"collection-item avatar\"\n                  v-for=\"(income, index) in getIncomes.docs\"\n                  :key=\"income._id\"\n                  @click=\"handleBottomNav(false)\"\n                  v-hammer:swipe.right=\"(event)=> deleteIncome(income, index)\"\n                  v-init:currencyScope=\"{options: {thousandsSeparator:income.currency.thousand,decimalSeparator:income.currency.decimal,spaceBetweenAmountAndSymbol: true} }\"\n                >\n                  <div>\n                    <router-link :to=\"{path:'/income/'+income._id}\" style=\"color: black;\">\n                      <div\n                        v-if=\"income.client.type == 'User'\"\n                        style=\"margin-bottom: -83px; !important\"\n                      >\n                        <div class=\"row\">\n                          <div class=\"col s12\">\n                            <img\n                              v-if=\"income.client.data.imgUrl\"\n                              :src=\"income.client.data.imgUrl\"\n                              alt\n                              :class=\"[(income.state == 'draft')?'pendingClass': 'successClass', 'circle']\"\n                              style=\"vertical-align: center;\"\n                            >\n                            <img\n                              v-else\n                              src=\"../../../public/img/default-avatar.png\"\n                              alt\n                              :class=\"[(income.state == 'draft')?'pendingClass': 'successClass', 'circle']\"\n                              style=\"vertical-align: center;\"\n                            >\n                          </div>\n                        </div>\n                        <br>\n                        <div class=\"row\">\n                          <div class=\"col s12\" style=\"margin-left: -60px;\">\n                            <small\n                              :class=\"[(income.state == 'draft')?'text-warning': 'text-success']\"\n                            >{{(income.state == 'draft')?'Pendiente':'Finalizada'}}</small>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div v-else style=\"margin-bottom: -83px; !important\">\n                        <div style=\"display:contents\" v-if=\"income.client.type == 'Business'\">\n                          <div class=\"row\">\n                            <div class=\"col s12\">\n                              <img\n                                src=\"../../assets/img/company_icon.png\"\n                                alt\n                                :class=\"[(income.state == 'draft')?'pendingClass': 'successClass', 'circle']\"\n                                style=\"vertical-align: center;\"\n                              >\n                            </div>\n                          </div>\n                          <br>\n                          <div class=\"row\">\n                            <div class=\"col s12\" style=\"margin-left: -60px;\">\n                              <small\n                                :class=\"[(income.state == 'draft')?'text-warning': 'text-success']\"\n                              >{{(income.state == 'draft')?'Pendiente':'Finalizada'}}</small>\n                            </div>\n                          </div>\n                        </div>\n\n                        <div style=\"display:contents\" v-else>\n                          <div class=\"row\">\n                            <div class=\"col s12\">\n                              <img\n                                src=\"../../../public/img/default-avatar.png\"\n                                alt\n                                :class=\"[(income.state == 'draft')?'pendingClass': 'successClass', 'circle']\"\n                                style=\"vertical-align: center;\"\n                              >\n                            </div>\n                          </div>\n                          <br>\n                          <div class=\"row\">\n                            <div class=\"col s12\" style=\"margin-left: -60px;\">\n                              <small\n                                :class=\"[(income.state == 'draft')?'text-warning': 'text-success']\"\n                              >{{(income.state == 'draft')?'Pendiente':'Finalizada'}}</small>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <span class>\n                        <b>{{income.name}}</b>\n                        <br>\n                        <p>\n                          {{get_clientName(income.client)}}\n                          <br>\n                          <small>{{income.createdAt | shortDate}}</small>\n                        </p>\n                      </span>\n                      \n                      <a style=\"text-decoration: none;\" class=\"secondary-content valign-wrapper\">\n                        <h5\n                          v-if=\"isMobile\"\n                          class=\"text-center text-success\"\n                        >{{(getTotal(income.lines).total) | currency(income.currency.prefix, income.currency.precision, currencyScope.options)}}</h5>\n                        <h3\n                          v-else\n                          class=\"text-center text-success\"\n                        >{{(getTotal(income.lines).total) | currency(income.currency.prefix, income.currency.precision, currencyScope.options)}}</h3>\n                      </a>\n                    </router-link>\n                  </div>\n                </li>\n              </transition-group>\n            </div>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// VUEX\nimport { mapActions, mapGetters, mapMutations, mapState } from 'vuex';\nimport { Modal } from '@/components';\nimport errorModal from '@/pages/Dashboard/Components/errorModal.vue';\nimport isMobile from '../../assets/js/isMobile.js';\nimport spinner from '../Dashboard/Components/spinner';\n\nimport _ from 'lodash';\n\nimport {\n  ChartCard,\n  ProductCard,\n  AnimatedNumber,\n  GlobalSalesCard\n} from '@/components';\n\nexport default {\n  components: {\n    Modal,\n    errorModal,\n    ChartCard,\n    spinner\n  },\n\n  data() {\n    return {\n      checkbox1: null,\n      incomes: [],\n      value: null,\n      loading: false,\n      getData: null,\n      isMobile: null,\n      showIncomes: true,\n      showw: true,\n      currencyScope: {}\n    };\n  },\n\n  methods: {\n    ...mapActions({\n      getAllIncomes: 'incomes/getAllIncomes'\n    }),\n    ...mapMutations({\n      hideShowBottom: 'HIDE_SHOW_BOTTOM',\n      cleanItem: 'items/CLEAN',\n      sliceIcome: 'incomes/SLICE_INCOME'\n    }),\n\n    handleBottomNav(state) {\n      // this.cleanItem();\n    },\n\n    get_clientName(client) {\n      if (\n        client.type == 'User' ||\n        client.type == 'Contact' ||\n        client.type == 'Business'\n      ) {\n        return client.data.name;\n      } else {\n        return client.name;\n      }\n    },\n    getTotal(lines) {\n      let total = _.sumBy(lines, function(line) {\n        return line.price * line.quantity;\n      });\n\n      return {\n        net: total,\n        tax: total * 0.19,\n        total: total * 0.19 + total\n      };\n    },\n\n    deleteIncome(movement) {\n      this.showIncomes = false;\n      if (movement) {\n        let obj = {\n          _id: movement._id,\n          isActive: false\n        };\n        this.sliceIcome(movement);\n        this.$store.dispatch('incomes/putIncome', obj).then(res => {\n          if (res) {\n            this.showIncomes = true;\n            this.$toasted.show('Documento eliminado!');\n            this.$router.push('/incomes');\n          }\n        });\n      }\n    }\n  },\n  computed: {\n    ...mapGetters({\n      getUser: 'users/user',\n      getErrors: 'incomes/getErrors',\n      getIncomes: 'incomes/getIncomes',\n      getBusinessScope: 'getBusinessScope',\n      getCurrencyConfig: 'getCurrencyConfig'\n    }),\n    ...mapState({\n      incomesGetParams: 'incomesGetParams'\n    })\n  },\n\n  mounted() {\n    this.isMobile = isMobile;\n    return new Promise((resolve, reject) => {\n      if (this.getBusinessScope._id) {\n        resolve('/' + this.getBusinessScope._id);\n      } else {\n        resolve('');\n      }\n    }).then(data => {\n      this.getData = data;\n      this.loading = true;\n      this.getAllIncomes({\n        params: `${this.incomesGetParams}`,\n        type: 'in',\n        isBusiness: data\n      })\n        .then(res => {\n          this.incomes = res;\n          this.loading = false;\n        })\n        .catch(err => {\n          console.log('this.getErrors --> ', this.getErrors);\n        });\n    });\n  },\n\n  watch: {\n    incomesGetParams: function() {\n      this.getAllIncomes(`${this.incomesGetParams}`);\n    },\n    getBusinessScope: function(val) {\n      this.getAllIncomes({\n        params: `${this.incomesGetParams}`,\n        type: 'in',\n        isBusiness: val._id ? '/' + this.getBusinessScope._id : ''\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n#tabla_ventas {\n  display: none;\n}\n\n@media (min-width: 992px) {\n  .md-hide-big {\n    display: none;\n  }\n}\n\n.md-layout-item {\n  padding-right: 0px;\n  padding-left: 0px;\n}\n\n.md-tabs {\n  margin-bottom: 24px;\n}\n.spinner {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  // position: fixed;\n  align-items: center;\n  justify-content: center;\n}\n.pendingClass {\n  border-color: #ffd600;\n  border-style: ridge;\n}\n.successClass {\n  border-color: #00c853;\n  border-style: ridge;\n}\n\n.md-list-item-content {\n  padding: 0 !important;\n}\n.md-list-item .md-list-item-container .md-ripple {\n  padding: 0 !important;\n}\n</style>\n"]}]}