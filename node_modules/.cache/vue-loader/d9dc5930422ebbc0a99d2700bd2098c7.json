{"remainingRequest":"/home/desarrollo/Escritorio/unabasev4/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/desarrollo/Escritorio/unabasev4/src/pages/business/company.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/desarrollo/Escritorio/unabasev4/src/pages/business/company.vue","mtime":1551818466184},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters, mapActions, mapState, mapMutations } from 'vuex';\nimport store from '../../store/store.js';\nimport isMobile from '../../assets/js/isMobile.js';\nimport scrollBtn from '../Dashboard/Components/scrollerBtn';\nimport { SlideYUpTransition } from 'vue2-transitions';\nimport spinner from '../Dashboard/Components/spinner';\nimport googleMaps from '../../pages/Dashboard/Maps/GoogleMaps';\n\nexport default {\n  name: 'Business',\n  data: () => ({\n    editing_phone: false,\n    editing_mail: false,\n    select: [],\n    isMobile: isMobile,\n    addPhone: false,\n    addEmail: false,\n    loading: true,\n    addAddress: true,\n    show: false,\n\n    items: [\n      { header: 'Today' },\n      {\n        avatar: 'https://cdn.vuetifyjs.com/images/lists/1.jpg',\n        title: 'Brunch this weekend?',\n        subtitle:\n          \"<span class='text--primary'>Ali Connors</span> &mdash; I'll be in your neighborhood doing errands this weekend. Do you want to hang out?\"\n      },\n      { divider: true, inset: true },\n      {\n        avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg',\n        title: 'Summer BBQ <span class=\"grey--text text--lighten-1\">4</span>',\n        subtitle:\n          \"<span class='text--primary'>to Alex, Scott, Jennifer</span> &mdash; Wish I could come, but I'm out of town this weekend.\"\n      },\n      { divider: true, inset: true },\n      {\n        avatar: 'https://cdn.vuetifyjs.com/images/lists/3.jpg',\n        title: 'Oui oui',\n        subtitle:\n          \"<span class='text--primary'>Sandra Adams</span> &mdash; Do you have Paris recommendations? Have you ever been?\"\n      }\n    ]\n  }),\n  components: {\n    scrollBtn,\n    SlideYUpTransition,\n    spinner,\n    googleMaps\n  },\n  methods: {\n    ...mapActions({\n      getCompany: 'business/getCompany',\n      postCompany: 'business/postCompany'\n    }),\n    ...mapMutations({\n      cleanCompany: 'business/CLEAN_COMPANY',\n      setCompany: 'business/SET_COMPANY',\n      pushPhone: 'business/ADD_PHONE',\n      deletePhone: 'business/DELETE_PHONE',\n      upPhone: 'business/UPDATE_PHONE',\n      upMail: 'business/UPDATE_EMAIL',\n      pushMail: 'business/ADD_EMAIL',\n      deleteMail: 'business/DELETE_EMAIL',\n      setAddres: 'business/SET_ADDRESS',\n      addObject: 'business/ADD_OBJECT'\n    }),\n\n    // GENERAL FUNCTIONS\n    update(event) {\n      if (event.second_level) {\n        this.setCompany({\n          attr: event.name,\n          second_level: event.second_level,\n          value: event.value\n        });\n      } else {\n        this.setCompany({ attr: event.name, value: event.value });\n      }\n    },\n    // PHONES FUNCTIONS\n    handlePhone() {\n      if (!this.editing_phone) {\n        this.pushPhone({\n          phone: this.phoneState.phone,\n          label: this.phoneState.label\n        });\n        this.upPhone({ phone: '', label: '' });\n      } else {\n        this.upPhone({ phone: '', label: '' });\n        this.editing_phone = false;\n      }\n      this.addPhone = false;\n    },\n    delete_phone(phone) {\n      this.deletePhone(phone);\n    },\n    updatePhone(event) {\n      this.addPhone = true;\n      if (event.name) {\n        this.upPhone({ attr: event.name, value: event.value });\n      } else {\n        this.editing_phone = true;\n        this.upPhone(event);\n      }\n    },\n\n    // EMAIL FUNCTIONS\n    updateEmail(event) {\n      if (event.name) {\n        this.upMail({ attr: event.name, value: event.value });\n      } else {\n        this.editing_mail = true;\n        this.upMail(event);\n      }\n    },\n    handleMail() {\n      if (!this.editing_mail) {\n        this.pushMail({\n          email: this.mailState.email,\n          label: this.mailState.label\n        });\n        this.upMail({ email: '', label: '' });\n      } else {\n        this.upMail({ email: '', label: '' });\n        this.editing_mail = false;\n      }\n      this.addEmail = false;\n    },\n    delete_email(email) {\n      this.deleteMail(email);\n    },\n    update_address(event) {\n      this.setAddres({ attr: event.name, value: event.value });\n    },\n\n    handleObject(event) {\n      this.addObject({\n        attr: event.name,\n        name: event.value,\n        number: null\n      });\n    }\n  },\n  created() {\n    if (this.$route.params.id) {\n      this.getCompany(this.$route.params.id).then(res => {\n        this.loading = false;\n        this.addAddress = true;\n      });\n    } else {\n      this.loading = false;\n      this.cleanCompany();\n    }\n  },\n\n  computed: {\n    COMPANY() {\n      return {\n        idNumber: this.getOneCompany.idNumber,\n        name: this.getOneCompany.name,\n        legalName: this.getOneCompany.legalName,\n        website: this.getOneCompany.website,\n        businessType: this.getOneCompany.businessType,\n        emails: this.getOneCompany.emails,\n        phones: this.getOneCompany.phones,\n        address: this.getOneCompany.address\n      };\n    },\n    ...mapGetters({\n      getOneCompany: 'business/getOneCompany'\n    }),\n    ...mapState({\n      phoneState: state => state.business.phone,\n      mailState: state => state.business.email\n    })\n  },\n\n  // NAVIGATIONS GUARDS\n  beforeRouteEnter: (to, from, next) => {\n    store.commit('HIDE_SHOW_BOTTOM', false);\n    next();\n  },\n\n  beforeRouteLeave(to, from, next) {\n    store.commit('HIDE_SHOW_BOTTOM', true);\n    next();\n  }\n};\n",{"version":3,"sources":["company.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0aA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"company.vue","sourceRoot":"src/pages/business","sourcesContent":["<template>\n  <div id=\"textField\">\n    <div v-if=\"loading\">\n      <spinner></spinner>\n    </div>\n    <md-content v-else style=\"max-height: 90vh !important;\" id=\"first\">\n      <md-content v-if=\"!isMobile\" class=\"md-elevation-4\">\n        <slide-y-up-transition :duration=\"500\">\n          <div class=\"md-layout\">\n            <div class=\"md-layout-item md-size-80\">\n              <h1\n                class=\"md-display-1\"\n              >{{((getOneCompany.name != '')?(getOneCompany.name): 'Nueva empresa') | uppercase}}</h1>\n\n              <small class=\"md-caption\">{{getOneCompany.website}}</small>\n            </div>\n            <div class=\"md-layout-item md-size-20\">\n              <br>\n              <div class=\"file-input img-circle\">\n                <div class=\"image-container\">\n                  <img src=\"../../assets/img/company_icon.png\">\n                </div>\n              </div>\n            </div>\n          </div>\n        </slide-y-up-transition>\n      </md-content>\n\n      <md-content v-else class=\"md-elevation-4\">\n        <div class=\"md-layout\">\n          <div class=\"md-layout-item md-size-80\">\n            <h1\n              class=\"md-title\"\n              style=\"color: gray;margin-top: 14px;margin-bottom: 0px;\"\n            >{{((getOneCompany.name != '')?(getOneCompany.name): 'Nueva empresa') | uppercase}}</h1>\n\n            <small class=\"md-caption\">{{getOneCompany.website}}</small>\n          </div>\n          <div class=\"md-layout-item md-size-20\" style=\"margin-top: 15px;\">\n            <md-avatar>\n              <img src=\"../../assets/img/company_icon.png\" alt=\"Avatar\">\n            </md-avatar>\n          </div>\n        </div>\n      </md-content>\n\n      <md-divider class=\"md-inset\"></md-divider>\n\n      <br>\n      <div class=\"md-layout\">\n        <div class=\"md-layout-item md-size-50 md-small-size-100\">\n          <md-field>\n            <v-text-field\n              color=\"green\"\n              label=\"RUT\"\n              :value=\"COMPANY.idNumber\"\n              name=\"idNumber\"\n              type=\"text\"\n              @input.native=\"update($event.target)\"\n              outline\n              append-icon=\"verified_user\"\n            ></v-text-field>\n            <!-- <label>RUT</label>\n            <md-input\n              :value=\"COMPANY.idNumber\"\n              name=\"idNumber\"\n              type=\"text\"\n              @input.native=\"update($event.target)\"\n            ></md-input>-->\n          </md-field>\n        </div>\n        <div class=\"md-layout-item md-size-50 md-small-size-100\">\n          <md-field>\n            <v-text-field\n              outline\n              color=\"green\"\n              label=\"Razon social\"\n              :value=\"((COMPANY.legalName)?COMPANY.legalName:'')\"\n              name=\"legalName\"\n              type=\"text\"\n              @blur=\"update($event.target)\"\n            ></v-text-field>\n            <!-- <label>Razon social</label>\n            <md-input\n              :value=\"((COMPANY.legalName)?COMPANY.legalName:'')\"\n              name=\"legalName\"\n              type=\"text\"\n              @blur=\"update($event.target)\"\n            ></md-input>-->\n          </md-field>\n        </div>\n      </div>\n\n      <div class=\"md-layout\">\n        <div class=\"md-layout-item md-size-50 md-small-size-100\">\n          <md-field>\n            <v-text-field\n              outline\n              label=\"Nombre\"\n              color=\"green\"\n              :value=\"COMPANY.name\"\n              name=\"name\"\n              type=\"text\"\n              append-icon=\"business\"\n              @input.native=\"update($event.target)\"\n            ></v-text-field>\n            <!-- <label>Nombre</label>\n            <md-input\n              :value=\"COMPANY.name\"\n              name=\"name\"\n              type=\"text\"\n              @input.native=\"update($event.target)\"\n            ></md-input>-->\n          </md-field>\n        </div>\n\n        <div class=\"md-layout-item md-size-50 md-small-size-100\">\n          <md-field>\n            <v-text-field\n              color=\"green\"\n              outline\n              label=\"Sitio web\"\n              name=\"website\"\n              :value=\"COMPANY.website\"\n              @input.native=\"update($event.target)\"\n              append-icon=\"public\"\n            ></v-text-field>\n            <!-- <label>Sitio web</label>\n            <md-input name=\"website\" :value=\"COMPANY.website\" @input.native=\"update($event.target)\"></md-input>\n            <md-icon>public</md-icon>-->\n          </md-field>\n        </div>\n      </div>\n\n      <div class=\"md-layout\">\n        <div class=\"md-layout-item md-size-50 md-small-size-100\">\n          <div class=\"md-layout\">\n            <div class=\"md-layout-item md-size-80\">\n              <br>\n              <span>\n                <b>Telefonos de la empresa</b>\n              </span>\n            </div>\n            <div class=\"md-layout-item md-size-20\">\n              <span>\n                <md-button\n                  v-if=\"addPhone == false\"\n                  class=\"md-just-icon md-round md-dense md-success md-simple\"\n                  style=\"margin-top: 10px;\"\n                  @click=\"addPhone = !addPhone\"\n                >\n                  <md-icon>add</md-icon>\n                </md-button>\n\n                <md-button\n                  v-else\n                  class=\"md-just-icon md-round md-dense md-success md-simple\"\n                  style=\"margin-top: 10px;\"\n                  @click=\"addPhone = !addPhone\"\n                >\n                  <md-icon>close</md-icon>\n                </md-button>\n              </span>\n            </div>\n          </div>\n\n          <md-list class=\"md-double-line\">\n            <md-list-item v-for=\"(phone, index) in COMPANY.phones\" :key=\"phone._id\">\n              <div class=\"md-list-item-text\" @click=\"updatePhone(phone)\">\n                <div class=\"row\">\n                  <div class=\"col s2\">\n                    <small>{{index + 1}}</small>\n                  </div>\n                  <div class=\"col s10\">\n                    <span>\n                      <b>{{phone.phone}}</b>\n                    </span>\n                    <br>\n                    <span>{{phone.label}}</span>\n                  </div>\n                </div>\n              </div>\n\n              <md-button\n                class=\"md-just-icon md-danger md-round md-mini md-simple\"\n                @click=\"delete_phone(phone)\"\n              >\n                <md-icon>close</md-icon>\n              </md-button>\n\n              <!-- <md-button\n                v-if=\"index == COMPANY.phones.length - 1\"\n                class=\"md-just-icon md-success md-round md-mini md-simple\"\n              >\n                <md-icon>add</md-icon>\n              </md-button>-->\n            </md-list-item>\n          </md-list>\n          <slide-y-up-transition :duration=\"500\">\n            <div class=\"md-layout\" v-if=\"addPhone\">\n              <div class=\"md-layout-item md-size-50 md-small-size-50\" style=\"padding: 0;\">\n                <md-field>\n                  <label>Telefono</label>\n                  <md-input\n                    name=\"phone\"\n                    :value=\"phoneState.phone\"\n                    @input.native=\"updatePhone($event.target)\"\n                    type=\"text\"\n                  ></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-size-30 md-small-size-30\" style=\"padding-left: 5%;\">\n                <md-field>\n                  <label>Etiqueta</label>\n                  <md-input\n                    name=\"label\"\n                    :value=\"phoneState.label\"\n                    @input.native=\"updatePhone($event.target)\"\n                    @blur=\"handlePhone()\"\n                  ></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-size-10\">\n                <md-button class=\"md-simple md-success md-dense md-mini md-round md-just-icon\">\n                  <md-icon>add</md-icon>\n                </md-button>\n              </div>\n\n              <!-- <div class=\"md-layout-item md-size-20 md-small-size-20 valign-wrapper\">\n                <md-button\n                  v-if=\"!editing_phone\"\n                  class=\"md-success md-round md-mini md-just-icon md-simple\"\n                  @click=\"handlePhone()\"\n                >\n                  <md-icon>save</md-icon>\n                </md-button>\n\n                <md-button\n                  v-if=\"editing_phone\"\n                  class=\"md-success md-round md-mini md-just-icon md-simple\"\n                  @click=\"handlePhone()\"\n                >\n                  <md-icon>edit</md-icon>\n                </md-button>\n              </div>-->\n            </div>\n          </slide-y-up-transition>\n          <md-divider></md-divider>\n        </div>\n\n        <div align=\"rigth\" class=\"md-layout-item md-size-50 md-small-size-100 pull-rigth\">\n          <div class=\"md-layout\">\n            <div class=\"md-layput-item md-size-80\">\n              <br>\n              <span>\n                <b>Emails de la empresa</b>\n              </span>\n            </div>\n            <div class=\"md-layout-item md-size-20\" style=\"margin-left: 20px;\">\n              <center>\n                <span>\n                  <md-button\n                    v-if=\"addEmail == false\"\n                    class=\"md-just-icon md-round md-dense md-success md-simple\"\n                    style=\"margin-top: 10px;\"\n                    @click=\"addEmail = !addEmail\"\n                  >\n                    <md-icon>add</md-icon>\n                  </md-button>\n\n                  <md-button\n                    v-else\n                    class=\"md-just-icon md-round md-dense md-success md-simple\"\n                    style=\"margin-top: 10px;\"\n                    @click=\"addEmail = !addEmail\"\n                  >\n                    <md-icon>close</md-icon>\n                  </md-button>\n                </span>\n              </center>\n            </div>\n          </div>\n\n          <md-list class=\"md-double-line\">\n            <md-list-item v-for=\"email in COMPANY.emails\" :key=\"email._id\">\n              <div class=\"md-list-item-text\" @click=\"updateEmail(email)\">\n                <span>\n                  <b class=\"text-gray darken-1\">{{email.email}}</b>\n                </span>\n                <span>{{email.label}}</span>\n              </div>\n\n              <md-button\n                class=\"md-just-icon md-danger md-round md-mini md-simple\"\n                @click=\"delete_email(email)\"\n              >\n                <md-icon>close</md-icon>\n              </md-button>\n            </md-list-item>\n          </md-list>\n\n          <slide-y-up-transition :duration=\"500\">\n            <div class=\"md-layout\" v-if=\"addEmail\">\n              <div class=\"md-layout-item md-size-50 md-small-size-50\" style=\"padding: 0;\">\n                <md-field>\n                  <label>Email</label>\n                  <md-input\n                    name=\"email\"\n                    :value=\"mailState.email\"\n                    @input.native=\"updateEmail($event.target)\"\n                    type=\"text\"\n                  ></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-size-40 md-small-size-40\" style=\"padding-left: 5%;\">\n                <md-field>\n                  <label>Etiqueta</label>\n                  <md-input\n                    name=\"label\"\n                    :value=\"mailState.label\"\n                    @input.native=\"updateEmail($event.target)\"\n                    @blur=\"handleMail()\"\n                  ></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-size-10\">\n                <md-button class=\"md-simple md-success md-dense md-mini md-round md-just-icon\">\n                  <md-icon>add</md-icon>\n                </md-button>\n              </div>\n\n              <!-- <div class=\"md-layout-item md-size-20 md-small-size-20 valign-wrapper\">\n                <md-button\n                  class=\"md-success md-round md-mini md-just-icon md-simple\"\n                  @click=\"handleMail()\"\n                >\n                  <md-icon>save</md-icon>\n                </md-button>\n              </div>-->\n            </div>\n          </slide-y-up-transition>\n          <md-divider></md-divider>\n        </div>\n      </div>\n\n      <div class=\"md-layout\">\n        <div class=\"md-layout-item md-size-100 md-small-size-100\">\n          <div class=\"md-layout\">\n            <div class=\"md-layput-item md-size-80\">\n              <br>\n              <span>\n                <b>Direccion de la empresa</b>\n              </span>\n            </div>\n            <div class=\"md-layout-item md-size-20\">\n              <span>\n                <md-button\n                  v-if=\"addAddress == false\"\n                  class=\"md-just-icon md-round md-dense md-success md-simple\"\n                  style=\"margin-top: 10px;\"\n                  @click=\"addAddress = !addAddress\"\n                >\n                  <md-icon>add</md-icon>\n                </md-button>\n\n                <md-button\n                  v-else\n                  class=\"md-just-icon md-round md-dense md-danger md-simple\"\n                  style=\"margin-top: 10px;\"\n                  @click=\"addAddress = !addAddress\"\n                >\n                  <md-icon>close</md-icon>\n                </md-button>\n              </span>\n            </div>\n          </div>\n\n          <slide-y-up-transition :duration=\"500\">\n            <div class=\"md-layout\" v-if=\"addAddress\">\n              <div class=\"md-layout-item md-size-100 md-small-size-100\">\n                <div class=\"container-fluid\">\n                  <googleMaps\n                    :initial=\"getOneCompany.address.text\"\n                    :res_name=\"'address'\"\n                    :res_second_level=\"'text'\"\n                    @setAddress=\"update\"\n                  ></googleMaps>\n                </div>\n              </div>\n              <!-- <div\n                class=\"md-layout-item md-size-50 md-small-size-100\"\n              ></div>-->\n            </div>\n          </slide-y-up-transition>\n        </div>\n      </div>\n\n      <div class=\"md-layout\">\n        <div class=\"md-layout-item md-size-100\" style=\"padding:0\">\n          <v-list two-line>\n            <v-subheader>Usuarios de la empresa</v-subheader>\n            <template v-for=\"(user, index) in getOneCompany.users\">\n              <v-divider :inset=\"true\" :key=\"index\"></v-divider>\n              <v-list-tile avatar :key=\"user.user.imgUrl\">\n                <v-list-tile-avatar>\n                  <img :src=\"user.user.imgUrl\">\n                </v-list-tile-avatar>\n\n                <v-list-tile-content>\n                  <v-list-tile-title v-html=\"user.user.name\"></v-list-tile-title>\n                  <v-list-tile-sub-title v-html=\"'<b>'+user.description+'</b>'\"></v-list-tile-sub-title>\n                </v-list-tile-content>\n              </v-list-tile>\n            </template>\n          </v-list>\n        </div>\n      </div>\n      <br>\n\n      <br>\n      <br>\n    </md-content>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions, mapState, mapMutations } from 'vuex';\nimport store from '../../store/store.js';\nimport isMobile from '../../assets/js/isMobile.js';\nimport scrollBtn from '../Dashboard/Components/scrollerBtn';\nimport { SlideYUpTransition } from 'vue2-transitions';\nimport spinner from '../Dashboard/Components/spinner';\nimport googleMaps from '../../pages/Dashboard/Maps/GoogleMaps';\n\nexport default {\n  name: 'Business',\n  data: () => ({\n    editing_phone: false,\n    editing_mail: false,\n    select: [],\n    isMobile: isMobile,\n    addPhone: false,\n    addEmail: false,\n    loading: true,\n    addAddress: true,\n    show: false,\n\n    items: [\n      { header: 'Today' },\n      {\n        avatar: 'https://cdn.vuetifyjs.com/images/lists/1.jpg',\n        title: 'Brunch this weekend?',\n        subtitle:\n          \"<span class='text--primary'>Ali Connors</span> &mdash; I'll be in your neighborhood doing errands this weekend. Do you want to hang out?\"\n      },\n      { divider: true, inset: true },\n      {\n        avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg',\n        title: 'Summer BBQ <span class=\"grey--text text--lighten-1\">4</span>',\n        subtitle:\n          \"<span class='text--primary'>to Alex, Scott, Jennifer</span> &mdash; Wish I could come, but I'm out of town this weekend.\"\n      },\n      { divider: true, inset: true },\n      {\n        avatar: 'https://cdn.vuetifyjs.com/images/lists/3.jpg',\n        title: 'Oui oui',\n        subtitle:\n          \"<span class='text--primary'>Sandra Adams</span> &mdash; Do you have Paris recommendations? Have you ever been?\"\n      }\n    ]\n  }),\n  components: {\n    scrollBtn,\n    SlideYUpTransition,\n    spinner,\n    googleMaps\n  },\n  methods: {\n    ...mapActions({\n      getCompany: 'business/getCompany',\n      postCompany: 'business/postCompany'\n    }),\n    ...mapMutations({\n      cleanCompany: 'business/CLEAN_COMPANY',\n      setCompany: 'business/SET_COMPANY',\n      pushPhone: 'business/ADD_PHONE',\n      deletePhone: 'business/DELETE_PHONE',\n      upPhone: 'business/UPDATE_PHONE',\n      upMail: 'business/UPDATE_EMAIL',\n      pushMail: 'business/ADD_EMAIL',\n      deleteMail: 'business/DELETE_EMAIL',\n      setAddres: 'business/SET_ADDRESS',\n      addObject: 'business/ADD_OBJECT'\n    }),\n\n    // GENERAL FUNCTIONS\n    update(event) {\n      if (event.second_level) {\n        this.setCompany({\n          attr: event.name,\n          second_level: event.second_level,\n          value: event.value\n        });\n      } else {\n        this.setCompany({ attr: event.name, value: event.value });\n      }\n    },\n    // PHONES FUNCTIONS\n    handlePhone() {\n      if (!this.editing_phone) {\n        this.pushPhone({\n          phone: this.phoneState.phone,\n          label: this.phoneState.label\n        });\n        this.upPhone({ phone: '', label: '' });\n      } else {\n        this.upPhone({ phone: '', label: '' });\n        this.editing_phone = false;\n      }\n      this.addPhone = false;\n    },\n    delete_phone(phone) {\n      this.deletePhone(phone);\n    },\n    updatePhone(event) {\n      this.addPhone = true;\n      if (event.name) {\n        this.upPhone({ attr: event.name, value: event.value });\n      } else {\n        this.editing_phone = true;\n        this.upPhone(event);\n      }\n    },\n\n    // EMAIL FUNCTIONS\n    updateEmail(event) {\n      if (event.name) {\n        this.upMail({ attr: event.name, value: event.value });\n      } else {\n        this.editing_mail = true;\n        this.upMail(event);\n      }\n    },\n    handleMail() {\n      if (!this.editing_mail) {\n        this.pushMail({\n          email: this.mailState.email,\n          label: this.mailState.label\n        });\n        this.upMail({ email: '', label: '' });\n      } else {\n        this.upMail({ email: '', label: '' });\n        this.editing_mail = false;\n      }\n      this.addEmail = false;\n    },\n    delete_email(email) {\n      this.deleteMail(email);\n    },\n    update_address(event) {\n      this.setAddres({ attr: event.name, value: event.value });\n    },\n\n    handleObject(event) {\n      this.addObject({\n        attr: event.name,\n        name: event.value,\n        number: null\n      });\n    }\n  },\n  created() {\n    if (this.$route.params.id) {\n      this.getCompany(this.$route.params.id).then(res => {\n        this.loading = false;\n        this.addAddress = true;\n      });\n    } else {\n      this.loading = false;\n      this.cleanCompany();\n    }\n  },\n\n  computed: {\n    COMPANY() {\n      return {\n        idNumber: this.getOneCompany.idNumber,\n        name: this.getOneCompany.name,\n        legalName: this.getOneCompany.legalName,\n        website: this.getOneCompany.website,\n        businessType: this.getOneCompany.businessType,\n        emails: this.getOneCompany.emails,\n        phones: this.getOneCompany.phones,\n        address: this.getOneCompany.address\n      };\n    },\n    ...mapGetters({\n      getOneCompany: 'business/getOneCompany'\n    }),\n    ...mapState({\n      phoneState: state => state.business.phone,\n      mailState: state => state.business.email\n    })\n  },\n\n  // NAVIGATIONS GUARDS\n  beforeRouteEnter: (to, from, next) => {\n    store.commit('HIDE_SHOW_BOTTOM', false);\n    next();\n  },\n\n  beforeRouteLeave(to, from, next) {\n    store.commit('HIDE_SHOW_BOTTOM', true);\n    next();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>"]}]}