{"remainingRequest":"/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js!/home/desarrollo/Escritorio/unabasev4/node_modules/eslint-loader/index.js??ref--13-0!/home/desarrollo/Escritorio/unabasev4/src/store/modules/items.js","dependencies":[{"path":"/home/desarrollo/Escritorio/unabasev4/src/store/modules/items.js","mtime":1552592553539},{"path":"/home/desarrollo/Escritorio/unabasev4/.babelrc","mtime":1547153504905},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport _Object$keys from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport _JSON$stringify from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.function.name\";\nimport axios from 'axios';\nimport api from '../../lib/api';\nexport default {\n  namespaced: true,\n  state: {\n    items: Array(),\n    userItems: [],\n    item: {\n      item: '',\n      name: '',\n      price: 0,\n      quantity: 1,\n      tax: [],\n      estimate: {\n        buy: {\n          lock: false,\n          price: ''\n        },\n        sell: {\n          lock: false,\n          price: ''\n        }\n      },\n      margin: {\n        max: {\n          percentage: '',\n          price: ''\n        },\n        min: {\n          percentage: '',\n          price: ''\n        }\n      }\n    },\n    selectedItems: [],\n    selectedItemsAdd: [],\n    globalCreateValues: {\n      price: 0,\n      quantity: 1\n    }\n  },\n  mutations: {\n    SET_ITEMS: function SET_ITEMS(state, payload) {\n      state.items = payload;\n    },\n    SET_USER_ITEMS: function SET_USER_ITEMS(state, payload) {\n      state.userItems = payload;\n    },\n    SET_ITEM: function SET_ITEM(state, payload) {\n      state.item.movement = this.getters['incomes/getIncome']._id != undefined ? this.getters['incomes/getIncome']._id : null;\n\n      if (payload._id) {\n        state.item = payload;\n      } else {\n        if (payload.attr == 'item') {\n          ;\n          state.item['name'] = payload.value.name, state.item['item'] = payload.value._id;\n        } else {\n          if (payload.attr && payload.attr2 && payload.attr3) {\n            state.item[payload.attr][payload.attr2][payload.attr3] = payload.value;\n          }\n\n          if (payload.attr && payload.attr2 && !payload.attr3) {\n            state.item[payload.attr][payload.attr2] = payload.value;\n          }\n\n          if (payload.attr && !payload.attr2 && !payload.attr3) {\n            state.item[payload.attr] = payload.value;\n          }\n        }\n      }\n    },\n    HANDLE_SELECT_INPUT: function HANDLE_SELECT_INPUT(state, payload) {\n      state.item.tax = JSON.parse(_JSON$stringify(payload));\n    },\n    CLEAN: function CLEAN(state) {\n      console.log('limpiando el item');\n      state.item = {\n        item: '',\n        name: '',\n        price: 0,\n        quantity: 1,\n        tax: [],\n        estimate: {\n          buy: {\n            lock: false,\n            price: 0\n          },\n          sell: {\n            lock: false,\n            price: 0\n          }\n        },\n        margin: {\n          max: {\n            percentage: 0,\n            price: 0\n          },\n          min: {\n            percentage: 0,\n            price: 0\n          }\n        }\n      };\n    },\n    CLEAN_SELECTION: function CLEAN_SELECTION(state, payload) {\n      state[payload].splice(0, state[payload].length);\n    },\n    HANDLE_SELECTIONS: function HANDLE_SELECTIONS(state, payload) {\n      if (payload.isSingle) {\n        var i = state[payload.var][0];\n\n        if (i > -1) {\n          state[payload.var].splice(0, 1);\n        } else {\n          state[payload.var].push(payload.index);\n        }\n      } else {\n        var _i = state[payload.var].indexOf(payload.index);\n\n        if (_i > -1) {\n          state[payload.var].splice(_i, 1);\n        } else {\n          state[payload.var].push(payload.index);\n        }\n      }\n    },\n    EDIT_SELECTION: function EDIT_SELECTION(state, payload) {\n      var keys = _Object$keys(payload.edit);\n\n      for (var index = 0; index < state[payload.var].length; index++) {\n        var line = this.getters['incomes/getIncome'].lines[state[payload.var][index]];\n\n        if (payload.delete == false) {\n          if (payload.edit[keys[0]] != null && payload.edit[keys[0]] != '') {\n            line[keys[0]] = payload.edit[keys[0]];\n          } else {\n            line[keys[0]] = line[keys[0]];\n          }\n\n          if (payload.edit[keys[1]] != null && payload.edit[keys[1]] != '') {\n            line[keys[1]] = payload.edit[keys[1]];\n          } else {\n            line[keys[1]] = line[keys[1]];\n          }\n\n          line.currency = this.getters['incomes/getIncome'].currency;\n          line.movementType = payload.movementType;\n          this.dispatch('incomes/putLine', line);\n        } else {\n          this.dispatch('incomes/deleteLine', line);\n        }\n      }\n\n      this.commit('items/CLEAN_SELECTION', payload.var);\n    },\n    SET_GLOBALS_CREATE: function SET_GLOBALS_CREATE(state, payload) {\n      if (payload == null) {\n        state.globalCreateValues = {\n          price: 0,\n          quantity: 1\n        };\n      } else {\n        state.globalCreateValues[payload.attr] = payload.value;\n      }\n    }\n  },\n  actions: {\n    getAllItems: function getAllItems(_ref, payload) {\n      var commit = _ref.commit;\n      return new _Promise(function (resolve, reject) {\n        axios.get(api + '/items/?isActive=true').then(function (data) {\n          console.log('ITEMS -> ', data.data);\n          commit('SET_ITEMS', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          console.log(err);\n          reject(err, err.response);\n        });\n      });\n    },\n    getUserItems: function getUserItems(_ref2, payload) {\n      var commit = _ref2.commit;\n      return new _Promise(function (resolve, reject) {\n        axios.get(api + '/users/lastItems').then(function (data) {\n          console.log('LAST ITEMS -> ', data.data);\n          commit('SET_USER_ITEMS', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          console.log(err);\n          reject(err, err.response);\n        });\n      });\n    },\n    getItem: function getItem(_ref3, payload) {\n      var commit = _ref3.commit;\n      return new _Promise(function (resolve, reject) {\n        console.log(payload);\n        axios.get(api + '/items/find/' + payload).then(function (data) {\n          console.log('ITEM -> ', data.data);\n          commit('SET_ITEM', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          console.log(err);\n          reject(err, err.response);\n        });\n      });\n    },\n    findItem: function findItem(_ref4, payload) {\n      var commit = _ref4.commit;\n      return new _Promise(function (resolve, reject) {\n        axios.get(api + '/items/' + payload).then(function (data) {\n          commit('SET_ITEM', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          console.log(err);\n          reject(err, err.response);\n        });\n      });\n    },\n    setItem: function setItem(_ref5, payload) {\n      var commit = _ref5.commit;\n      return new _Promise(function (resolve, reject) {\n        commit('SET_ITEM', payload);\n        resolve(payload);\n      });\n    },\n    postItem: function postItem(_ref6, payload) {\n      var _this = this;\n\n      var commit = _ref6.commit;\n      console.log('EN ITEMS.JS -> ', payload);\n      return new _Promise(function (resolve, reject) {\n        axios.post(api + '/items/', payload).then(function (data) {\n          console.log(data); // SET INITIAL PRICE AND QUANTITY\n\n          data.data.price = _this.state.items.item.price;\n          data.data.quantity = _this.state.items.item.quantity;\n          data.data.item = data.data._id;\n          data.data.justCreated = true;\n          data.data.tax = null, data.data.movement = _this.getters['incomes/getIncome']._id != undefined ? _this.getters['incomes/getIncome']._id : null, data.data.currency = _this.getters['incomes/getIncome'].currency != undefined ? _this.getters['incomes/getIncome'].currency : null;\n          commit('SET_ITEM', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          reject(err, err.response);\n        });\n      });\n    },\n    putItem: function putItem(_ref7, payload) {\n      var commit = _ref7.commit;\n      return new _Promise(function (resolve, reject) {\n        axios.put(api + '/items/' + payload._id, payload).then(function (data) {\n          commit('SET_ITEM', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          reject(err, err.response);\n        });\n      });\n    }\n  },\n  getters: {\n    getItems: function getItems(state) {\n      return state.items;\n    },\n    getItem: function getItem(state) {\n      return state.item;\n    },\n    getSelectedItems: function getSelectedItems(state) {\n      return state.selectedItems;\n    },\n    getSelectedItemsAdd: function getSelectedItemsAdd(state) {\n      return state.selectedItemsAdd;\n    },\n    getUserLastItems: function getUserLastItems(state) {\n      return state.userItems;\n    },\n    getGlobalItemVars: function getGlobalItemVars(state) {\n      return state.globalCreateValues;\n    }\n  }\n};",{"version":3,"sources":["/home/desarrollo/Escritorio/unabasev4/src/store/modules/items.js"],"names":["axios","api","namespaced","state","items","Array","userItems","item","name","price","quantity","tax","estimate","buy","lock","sell","margin","max","percentage","min","selectedItems","selectedItemsAdd","globalCreateValues","mutations","SET_ITEMS","payload","SET_USER_ITEMS","SET_ITEM","movement","getters","_id","undefined","attr","value","attr2","attr3","HANDLE_SELECT_INPUT","JSON","parse","CLEAN","console","log","CLEAN_SELECTION","splice","length","HANDLE_SELECTIONS","isSingle","i","var","push","index","indexOf","EDIT_SELECTION","keys","edit","line","lines","delete","currency","movementType","dispatch","commit","SET_GLOBALS_CREATE","actions","getAllItems","resolve","reject","get","then","data","catch","err","response","getUserItems","getItem","findItem","setItem","postItem","post","justCreated","putItem","put","getItems","getSelectedItems","getSelectedItemsAdd","getUserLastItems","getGlobalItemVars"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport api from '../../lib/api'\n\nexport default {\n  namespaced: true,\n  state: {\n    items: Array(),\n    userItems: [],\n    item: {\n      item: '',\n      name: '',\n      price: 0,\n      quantity: 1,\n      tax: [],\n      estimate: {\n        buy: {\n          lock: false,\n          price: ''\n        },\n        sell: {\n          lock: false,\n          price: ''\n        }\n      },\n      margin: {\n        max: {\n          percentage: '',\n          price: ''\n        },\n        min: {\n          percentage: '',\n          price: ''\n        }\n      }\n    },\n    selectedItems: [],\n    selectedItemsAdd: [],\n    globalCreateValues: {\n      price: 0,\n      quantity: 1\n    }\n  },\n  mutations: {\n    SET_ITEMS(state, payload) {\n      state.items = payload\n    },\n    SET_USER_ITEMS(state, payload) {\n      state.userItems = payload\n    },\n    SET_ITEM(state, payload) {\n      state.item.movement =\n        this.getters['incomes/getIncome']._id != undefined ?\n        this.getters['incomes/getIncome']._id :\n        null\n\n      if (payload._id) {\n        state.item = payload\n      } else {\n        if (payload.attr == 'item') {\n          ;\n          (state.item['name'] = payload.value.name),\n          (state.item['item'] = payload.value._id)\n        } else {\n          if (payload.attr && payload.attr2 && payload.attr3) {\n            state.item[payload.attr][payload.attr2][payload.attr3] =\n              payload.value\n          }\n          if (payload.attr && payload.attr2 && !payload.attr3) {\n            state.item[payload.attr][payload.attr2] = payload.value\n          }\n          if (payload.attr && !payload.attr2 && !payload.attr3) {\n            state.item[payload.attr] = payload.value\n          }\n        }\n      }\n    },\n\n    HANDLE_SELECT_INPUT(state, payload) {\n      state.item.tax = JSON.parse(JSON.stringify(payload))\n    },\n\n    CLEAN(state) {\n      console.log('limpiando el item')\n      state.item = {\n        item: '',\n        name: '',\n        price: 0,\n        quantity: 1,\n        tax: [],\n        estimate: {\n          buy: {\n            lock: false,\n            price: 0\n          },\n          sell: {\n            lock: false,\n            price: 0\n          }\n        },\n        margin: {\n          max: {\n            percentage: 0,\n            price: 0\n          },\n          min: {\n            percentage: 0,\n            price: 0\n          }\n        }\n      }\n    },\n\n    CLEAN_SELECTION(state, payload) {\n      state[payload].splice(0, state[payload].length)\n    },\n\n    HANDLE_SELECTIONS(state, payload) {\n      if (payload.isSingle) {\n        const i = state[payload.var][0]\n        if (i > -1) {\n          state[payload.var].splice(0, 1)\n        } else {\n          state[payload.var].push(payload.index)\n        }\n\n      } else {\n        const i = state[payload.var].indexOf(payload.index)\n        if (i > -1) {\n          state[payload.var].splice(i, 1)\n        } else {\n          state[payload.var].push(payload.index)\n        }\n      }\n\n    },\n\n    EDIT_SELECTION(state, payload) {\n      var keys = Object.keys(payload.edit)\n\n      for (let index = 0; index < state[payload.var].length; index++) {\n        let line = this.getters['incomes/getIncome'].lines[\n          state[payload.var][index]\n        ]\n\n        if (payload.delete == false) {\n          if (payload.edit[keys[0]] != null && payload.edit[keys[0]] != '') {\n            line[keys[0]] = payload.edit[keys[0]]\n          } else {\n            line[keys[0]] = line[keys[0]]\n          }\n          if (payload.edit[keys[1]] != null && payload.edit[keys[1]] != '') {\n            line[keys[1]] = payload.edit[keys[1]]\n          } else {\n            line[keys[1]] = line[keys[1]]\n          }\n\n          line.currency = this.getters['incomes/getIncome'].currency\n          line.movementType = payload.movementType\n\n          this.dispatch('incomes/putLine', line)\n        } else {\n          this.dispatch('incomes/deleteLine', line)\n        }\n      }\n      this.commit('items/CLEAN_SELECTION', payload.var)\n    },\n    SET_GLOBALS_CREATE(state, payload) {\n      if (payload == null) {\n        state.globalCreateValues = {\n          price: 0,\n          quantity: 1\n        }\n      } else {\n        state.globalCreateValues[payload.attr] = payload.value\n      }\n    }\n  },\n  actions: {\n    getAllItems({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        axios\n          .get(api + '/items/?isActive=true')\n          .then(data => {\n            console.log('ITEMS -> ', data.data)\n            commit('SET_ITEMS', data.data)\n            resolve(data.data)\n          })\n          .catch(err => {\n            console.log(err)\n            reject(err, err.response)\n          })\n      })\n    },\n    getUserItems({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        axios\n          .get(api + '/users/lastItems')\n          .then(data => {\n            console.log('LAST ITEMS -> ', data.data)\n            commit('SET_USER_ITEMS', data.data)\n            resolve(data.data)\n          })\n          .catch(err => {\n            console.log(err)\n            reject(err, err.response)\n          })\n      })\n    },\n\n    getItem({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        console.log(payload)\n        axios\n          .get(api + '/items/find/' + payload)\n          .then(data => {\n            console.log('ITEM -> ', data.data)\n            commit('SET_ITEM', data.data)\n            resolve(data.data)\n          })\n          .catch(err => {\n            console.log(err)\n            reject(err, err.response)\n          })\n      })\n    },\n\n    findItem({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        axios\n          .get(api + '/items/' + payload)\n          .then(data => {\n            commit('SET_ITEM', data.data)\n            resolve(data.data)\n          })\n          .catch(err => {\n            console.log(err)\n            reject(err, err.response)\n          })\n      })\n    },\n\n    setItem({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        commit('SET_ITEM', payload)\n        resolve(payload)\n      })\n    },\n\n    postItem({\n      commit\n    }, payload) {\n      console.log('EN ITEMS.JS -> ', payload)\n      return new Promise((resolve, reject) => {\n        axios\n          .post(api + '/items/', payload)\n          .then(data => {\n            console.log(data)\n            // SET INITIAL PRICE AND QUANTITY\n            data.data.price = this.state.items.item.price\n            data.data.quantity = this.state.items.item.quantity\n            data.data.item = data.data._id\n            data.data.justCreated = true;\n            (data.data.tax = null),\n            (data.data.movement =\n              this.getters['incomes/getIncome']._id != undefined ?\n              this.getters['incomes/getIncome']._id :\n              null),\n            (data.data.currency =\n              this.getters['incomes/getIncome'].currency != undefined ?\n              this.getters['incomes/getIncome'].currency :\n              null)\n\n            commit('SET_ITEM', data.data)\n            resolve(data.data)\n          })\n          .catch(err => {\n            reject(err, err.response)\n          })\n      })\n    },\n\n    putItem({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        axios\n          .put(api + '/items/' + payload._id, payload)\n          .then(data => {\n            commit('SET_ITEM', data.data)\n            resolve(data.data)\n          })\n          .catch(err => {\n            reject(err, err.response)\n          })\n      })\n    }\n  },\n  getters: {\n    getItems: state => state.items,\n    getItem: state => state.item,\n    getSelectedItems: state => state.selectedItems,\n    getSelectedItemsAdd: state => state.selectedItemsAdd,\n    getUserLastItems: state => state.userItems,\n    getGlobalItemVars: state => state.globalCreateValues\n  }\n}\n"]}]}