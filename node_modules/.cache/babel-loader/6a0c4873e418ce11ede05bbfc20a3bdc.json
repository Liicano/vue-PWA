{"remainingRequest":"/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js!/home/desarrollo/Escritorio/unabasev4/node_modules/eslint-loader/index.js??ref--13-0!/home/desarrollo/Escritorio/unabasev4/src/pages/Dashboard/Components/generalSearch/main.js","dependencies":[{"path":"/home/desarrollo/Escritorio/unabasev4/src/pages/Dashboard/Components/generalSearch/main.js","mtime":1547153505005},{"path":"/home/desarrollo/Escritorio/unabasev4/.babelrc","mtime":1547153504905},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport _Promise from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Object$assign from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/core-js/object/assign\";\nimport \"core-js/modules/es6.function.name\";\n//  import { util } from 'vue'\nexport default {\n  data: function data() {\n    return {\n      items: [],\n      query: '',\n      current: -1,\n      loading: false,\n      selectFirst: false,\n      queryParamName: '',\n      typeCheck: false\n    };\n  },\n  computed: {\n    hasItems: function hasItems() {\n      return this.items.length > 0;\n    },\n    isEmpty: function isEmpty() {\n      return !this.query;\n    },\n    isDirty: function isDirty() {\n      return !!this.query;\n    }\n  },\n  methods: {\n    update: function update() {\n      var _this = this;\n\n      this.cancel();\n\n      if (!this.query) {\n        return this.reset();\n      }\n\n      if (this.minChars && this.query.length < this.minChars) {\n        return;\n      }\n\n      this.loading = true;\n      this.fetch().then(function (response) {\n        if (response && _this.query) {\n          var data = response.data.docs;\n          console.log(data);\n          data = _this.prepareResponseData ? _this.prepareResponseData(data) : data;\n          _this.items = _this.limit ? data.slice(0, _this.limit) : data;\n          _this.current = -1;\n          _this.loading = false;\n\n          if (_this.selectFirst) {\n            _this.down();\n          }\n        }\n      });\n      this.showEmpty = true;\n      this.typeCheck = true;\n    },\n    fetch: function fetch() {\n      var _this2 = this;\n\n      if (!this.$http) {\n        // return util.warn('You need to provide a HTTP client', this)\n        alert('You need to provide a HTTP client', this);\n      }\n\n      if (!this.src) {\n        // return util.warn('You need to set the `src` property', this)\n        alert('You need to set the `src` property', this);\n      } // SI HAY UN QUERY PRINCIPAL\n      // const src = this.queryParamName\n      //   ? this.src\n      //   : this.src + this.query\n      //  SI HAY UN QUERY SECUNDARIO\n\n\n      var src = this.secondaryQuery != null ? this.src + this.query + '?' + this.secondaryQuery.name + '=' + this.secondaryQuery.value : this.src + this.query;\n      var params = this.queryParamName ? _Object$assign(_defineProperty({}, this.queryParamName, this.query), this.data) : this.data;\n      var cancel = new _Promise(function (resolve) {\n        return _this2.cancel = resolve;\n      });\n      var request = this.$http.get(src, {\n        params: params\n      });\n      return _Promise.race([cancel, request]);\n    },\n    cancel: function cancel() {// used to 'cancel' previous searches\n    },\n    reset: function reset() {\n      this.items = [];\n      this.query = '';\n      this.loading = false;\n    },\n    setActive: function setActive(index) {\n      this.current = index;\n    },\n    activeClass: function activeClass(index) {\n      return {\n        active: this.current === index\n      };\n    },\n    hit: function hit() {\n      if (this.current !== -1) {\n        this.onHit(this.items[this.current]);\n      }\n    },\n    up: function up() {\n      if (this.current > 0) {\n        this.current--;\n      } else if (this.current === -1) {\n        this.current = this.items.length - 1;\n      } else {\n        this.current = -1;\n      }\n    },\n    down: function down() {\n      if (this.current < this.items.length - 1) {\n        this.current++;\n      } else {\n        this.current = -1;\n      }\n    },\n    onHit: function onHit() {\n      // util.warn('You need to implement the `onHit` method', this)\n      alert('You need to implement the `onHit` method', this);\n    }\n  }\n};",{"version":3,"sources":["/home/desarrollo/Escritorio/unabasev4/src/pages/Dashboard/Components/generalSearch/main.js"],"names":["data","items","query","current","loading","selectFirst","queryParamName","typeCheck","computed","hasItems","length","isEmpty","isDirty","methods","update","cancel","reset","minChars","fetch","then","response","docs","console","log","prepareResponseData","limit","slice","down","showEmpty","$http","alert","src","secondaryQuery","name","value","params","resolve","request","get","race","setActive","index","activeClass","active","hit","onHit","up"],"mappings":"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","sourcesContent":["//  import { util } from 'vue'\n\nexport default {\n    data () {\n      return {\n        items: [],\n        query: '',\n        current: -1,\n        loading: false,\n        selectFirst: false,\n        queryParamName: '',\n        typeCheck: false\n  \n      }\n    },\n  \n    computed: {\n      hasItems () {\n        return this.items.length > 0\n      },\n     \n      isEmpty () {\n        return !this.query\n      },\n  \n      isDirty () {\n        return !!this.query\n      }\n    },\n  \n    methods: {\n      update () {\n        this.cancel()\n  \n        if (!this.query) {\n          return this.reset()\n        }\n  \n        if (this.minChars && this.query.length < this.minChars) {\n          return\n        }\n  \n        this.loading = true\n  \n        this.fetch().then((response) => {\n          if (response && this.query) {\n            let data = response.data.docs\n            console.log(data);\n            data = this.prepareResponseData ? this.prepareResponseData(data) : data\n            this.items = this.limit ? data.slice(0, this.limit) : data\n            this.current = -1\n            this.loading = false\n  \n            if (this.selectFirst) {\n              this.down()\n            }\n          }\n        })\n        this.showEmpty = true;\n        this.typeCheck = true;\n      },\n  \n      fetch () {\n        if (!this.$http) {\n          // return util.warn('You need to provide a HTTP client', this)\n          alert('You need to provide a HTTP client', this);\n        }\n  \n        if (!this.src) {\n          // return util.warn('You need to set the `src` property', this)\n          alert('You need to set the `src` property', this);\n        }\n  \n        // SI HAY UN QUERY PRINCIPAL\n        // const src = this.queryParamName\n        //   ? this.src\n        //   : this.src + this.query\n  \n          //  SI HAY UN QUERY SECUNDARIO\n           const src = (this.secondaryQuery != null) ? this.src + this.query+ '?'+ this.secondaryQuery.name+ '=' + this.secondaryQuery.value : this.src + this.query\n          \n  \n        const params = this.queryParamName\n          ? Object.assign({ [this.queryParamName]: this.query }, this.data)\n          : this.data\n  \n        let cancel = new Promise((resolve) => this.cancel = resolve)\n        let request = this.$http.get(src, { params })\n  \n        return Promise.race([cancel, request])\n      },\n  \n      cancel () {\n        // used to 'cancel' previous searches\n      },\n  \n      reset () {\n        this.items = []\n        this.query = ''\n        this.loading = false\n      },\n  \n      setActive (index) {\n        this.current = index\n      },\n  \n      activeClass (index) {\n        return {\n          active: this.current === index\n        }\n      },\n  \n      hit () {\n        if (this.current !== -1) {\n          this.onHit(this.items[this.current])\n        }\n      },\n  \n      up () {\n        if (this.current > 0) {\n          this.current--\n        } else if (this.current === -1) {\n          this.current = this.items.length - 1\n        } else {\n          this.current = -1\n        }\n      },\n  \n      down () {\n        if (this.current < this.items.length - 1) {\n          this.current++\n        } else {\n          this.current = -1\n        }\n      },\n  \n      onHit () {\n        // util.warn('You need to implement the `onHit` method', this)\n        alert('You need to implement the `onHit` method', this);\n      }\n    }\n  }\n  "]}]}