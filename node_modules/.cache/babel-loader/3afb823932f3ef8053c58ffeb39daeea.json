{"remainingRequest":"/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js!/home/desarrollo/Escritorio/unabasev4/node_modules/eslint-loader/index.js??ref--13-0!/home/desarrollo/Escritorio/unabasev4/src/pages/Dashboard/Components/autocomplete/main.js","dependencies":[{"path":"/home/desarrollo/Escritorio/unabasev4/src/pages/Dashboard/Components/autocomplete/main.js","mtime":1550861886951},{"path":"/home/desarrollo/Escritorio/unabasev4/.babelrc","mtime":1547153504905},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport _Promise from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Object$assign from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/core-js/object/assign\";\nimport \"core-js/modules/es6.function.name\";\n//  import { util } from 'vue'\nimport isMobile from '../../../../assets/js/isMobile';\nexport default {\n  data: function data() {\n    return {\n      items: [],\n      query: '',\n      finded: false,\n      current: -1,\n      loading: false,\n      selectFirst: false,\n      queryParamName: '',\n      typeCheck: false,\n      dirty: false\n    };\n  },\n  computed: {\n    hasItems: function hasItems() {\n      return this.items.length > 0;\n    },\n    isEmpty: function isEmpty() {\n      return !this.query;\n    },\n    isDirty: function isDirty() {\n      return !!this.query;\n    }\n  },\n  methods: {\n    update: function update(event) {\n      var _this = this;\n\n      // console.log(\"AQUI EMPIEZA EL FETCH!!!\");\n      this.query = event.value; // console.log(this.query);\n\n      this.cancel();\n\n      if (this.query == '' && this.isDirty) {\n        return this.reset();\n      }\n\n      if (this.minChars && this.query.length < this.minChars) {\n        return;\n      }\n\n      this.loading = true;\n      this.fetch().then(function (response) {\n        if (response && _this.query != '') {\n          var data = response.data.docs;\n          data = _this.prepareResponseData ? _this.prepareResponseData(data) : data;\n          _this.items = _this.limit ? data.slice(0, _this.limit) : data;\n          console.log(\"this.items -> \", _this.items); // console.log(\"this.hasItems -> \", this.hasItems);\n\n          _this.current = -1;\n          _this.loading = false;\n\n          if (_this.selectFirst) {\n            _this.down();\n          }\n        }\n\n        if (!_this.hasItems && _this.isDirty && _this.config.itemType != 'items') {\n          _this.showSnackbar = true;\n        } else {\n          _this.showSnackbar = false;\n        }\n      });\n      this.showEmpty = true;\n      this.typeCheck = true; // this.dirty = true;\n\n      if (this.config.optionalInputFunction_res) {\n        this.$emit('optionalInputFunction', {\n          name: this.config.optionalInputFunction_res[0],\n          value: this.query\n        });\n      } // console.log('AQUI TERMINA EL UPDATE');\n\n    },\n    fetch: function fetch() {\n      var _this2 = this;\n\n      if (!this.$http) {\n        // return util.warn('You need to provide a HTTP client', this)\n        alert('You need to provide a HTTP client', this);\n      }\n\n      if (!this.src) {\n        // return util.warn('You need to set the `src` property', this)\n        alert('You need to set the `src` property', this);\n      } // SI HAY UN QUERY PRINCIPAL\n      // const src = this.queryParamName\n      //   ? this.src\n      //   : this.src + this.query\n      //  SI HAY UN QUERY SECUNDARIO\n\n\n      var src = this.secondaryQuery != null ? this.src + this.query + '?' + this.secondaryQuery.name + '=' + this.secondaryQuery.value : this.src + this.query;\n      var params = this.queryParamName ? _Object$assign(_defineProperty({}, this.queryParamName, this.query), this.data) : this.data;\n      var cancel = new _Promise(function (resolve) {\n        return _this2.cancel = resolve;\n      });\n      var request = this.$http.get(src, {\n        params: params\n      });\n      return _Promise.race([cancel, request]);\n    },\n    cancel: function cancel() {// used to 'cancel' previous searches\n    },\n    reset: function reset() {\n      // if (this.config.itemType == 'items') {\n      //   if (this.current == -1) {\n      //     this.onEmpty();\n      //   } else {\n      //     console.log('Se selecciono algo (SELECCION)');\n      //   }\n      // }\n      this.items = [];\n      this.loading = false;\n\n      if (!isMobile) {\n        this.$emit('blurEvent', this.query);\n      }\n    },\n    setActive: function setActive(index) {\n      this.current = index;\n    },\n    activeClass: function activeClass(index) {\n      return {\n        active: this.current === index\n      };\n    },\n    hit: function hit(index) {\n      console.log(\"this.current -> \", this.current);\n\n      if (this.current != -1) {\n        console.log(this.items[this.current]);\n        this.onHit(this.items[this.current]);\n      }\n    },\n    up: function up() {\n      if (this.current > 0) {\n        this.current--;\n      } else if (this.current === -1) {\n        this.current = this.items.length - 1;\n      } else {\n        this.current = -1;\n      }\n    },\n    down: function down() {\n      if (this.current < this.items.length - 1) {\n        this.current++;\n      } else {\n        this.current = -1;\n      }\n    },\n    onHit: function onHit() {\n      // util.warn('You need to implement the `onHit` method', this)\n      alert('You need to implement the `onHit` method', this);\n    }\n  }\n};",{"version":3,"sources":["/home/desarrollo/Escritorio/unabasev4/src/pages/Dashboard/Components/autocomplete/main.js"],"names":["isMobile","data","items","query","finded","current","loading","selectFirst","queryParamName","typeCheck","dirty","computed","hasItems","length","isEmpty","isDirty","methods","update","event","value","cancel","reset","minChars","fetch","then","response","docs","prepareResponseData","limit","slice","console","log","down","config","itemType","showSnackbar","showEmpty","optionalInputFunction_res","$emit","name","$http","alert","src","secondaryQuery","params","resolve","request","get","race","setActive","index","activeClass","active","hit","onHit","up"],"mappings":"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","sourcesContent":["//  import { util } from 'vue'\nimport isMobile from '../../../../assets/js/isMobile'\n\nexport default {\n  data() {\n    return {\n      items: [],\n      query: '',\n      finded: false,\n      current: -1,\n      loading: false,\n      selectFirst: false,\n      queryParamName: '',\n      typeCheck: false,\n      dirty: false\n\n    }\n  },\n\n  computed: {\n    hasItems() {\n      return this.items.length > 0\n    },\n\n    isEmpty() {\n      return !this.query\n    },\n\n    isDirty() {\n      return !!this.query\n    }\n  },\n\n  methods: {\n    update(event) {\n      // console.log(\"AQUI EMPIEZA EL FETCH!!!\");\n      this.query = event.value;\n      // console.log(this.query);\n\n\n      this.cancel()\n\n      if (this.query == '' && this.isDirty) {\n        return this.reset()\n      }\n\n      if (this.minChars && this.query.length < this.minChars) {\n        return\n      }\n\n      this.loading = true\n\n      this.fetch().then((response) => {\n        if (response && this.query != '') {\n\n          let data = response.data.docs\n          data = this.prepareResponseData ? this.prepareResponseData(data) : data\n          this.items = this.limit ? data.slice(0, this.limit) : data\n          console.log(\"this.items -> \", this.items);\n          // console.log(\"this.hasItems -> \", this.hasItems);\n          this.current = -1\n          this.loading = false\n\n          if (this.selectFirst) {\n            this.down()\n          }\n        }\n        if (!this.hasItems && this.isDirty && this.config.itemType != 'items') {\n          this.showSnackbar = true;\n        } else {\n          this.showSnackbar = false;\n        }\n      })\n      this.showEmpty = true;\n      this.typeCheck = true;\n      // this.dirty = true;\n\n\n      if (this.config.optionalInputFunction_res) {\n        this.$emit('optionalInputFunction', {\n          name: this.config.optionalInputFunction_res[0],\n          value: this.query\n        })\n      }\n\n      // console.log('AQUI TERMINA EL UPDATE');\n\n    },\n\n    fetch() {\n      if (!this.$http) {\n        // return util.warn('You need to provide a HTTP client', this)\n        alert('You need to provide a HTTP client', this);\n      }\n\n      if (!this.src) {\n        // return util.warn('You need to set the `src` property', this)\n        alert('You need to set the `src` property', this);\n      }\n\n      // SI HAY UN QUERY PRINCIPAL\n      // const src = this.queryParamName\n      //   ? this.src\n      //   : this.src + this.query\n\n      //  SI HAY UN QUERY SECUNDARIO\n      const src = (this.secondaryQuery != null) ? this.src + this.query + '?' + this.secondaryQuery.name + '=' + this.secondaryQuery.value : this.src + this.query\n\n\n      const params = this.queryParamName ?\n        Object.assign({\n          [this.queryParamName]: this.query\n        }, this.data) :\n        this.data\n\n      let cancel = new Promise((resolve) => this.cancel = resolve)\n      let request = this.$http.get(src, {\n        params\n      })\n\n      return Promise.race([cancel, request])\n    },\n\n    cancel() {\n      // used to 'cancel' previous searches\n    },\n\n\n\n\n    reset() {\n\n      // if (this.config.itemType == 'items') {\n      //   if (this.current == -1) {\n      //     this.onEmpty();\n      //   } else {\n      //     console.log('Se selecciono algo (SELECCION)');\n      //   }\n      // }\n\n      this.items = []\n      this.loading = false\n\n      if (!isMobile) {\n        this.$emit('blurEvent', this.query)\n      }\n    },\n\n    setActive(index) {\n      this.current = index\n    },\n\n    activeClass(index) {\n      return {\n        active: this.current === index\n      }\n    },\n\n    hit(index) {\n      console.log(\"this.current -> \", this.current);\n      if (this.current != -1) {\n        console.log(this.items[this.current]);\n        this.onHit(this.items[this.current])\n      }\n    },\n\n    up() {\n      if (this.current > 0) {\n        this.current--\n      } else if (this.current === -1) {\n        this.current = this.items.length - 1\n      } else {\n        this.current = -1\n      }\n    },\n\n    down() {\n      if (this.current < this.items.length - 1) {\n        this.current++\n      } else {\n        this.current = -1\n      }\n    },\n\n    onHit() {\n      // util.warn('You need to implement the `onHit` method', this)\n      alert('You need to implement the `onHit` method', this);\n    }\n  }\n}\n"]}]}