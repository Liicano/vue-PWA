{"remainingRequest":"/home/desarrollo/Escritorio/unabasev4/node_modules/thread-loader/dist/cjs.js!/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js!/home/desarrollo/Escritorio/unabasev4/node_modules/eslint-loader/index.js??ref--13-0!/home/desarrollo/Escritorio/unabasev4/src/store/modules/incomes.js","dependencies":[{"path":"/home/desarrollo/Escritorio/unabasev4/src/store/modules/incomes.js","mtime":1552510764621},{"path":"/home/desarrollo/Escritorio/unabasev4/.babelrc","mtime":1547153504905},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/desarrollo/Escritorio/unabasev4/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"/home/desarrollo/Escritorio/unabasev4/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport axios from 'axios';\nimport api from '../../lib/api';\nimport invoice_generator from '../../assets/js/invoice';\nexport default {\n  namespaced: true,\n  state: {\n    incomes: [],\n    income: {\n      name: null,\n      description: null,\n      dates: {\n        expiration: new Date()\n      },\n      creator: null,\n      responsable: {\n        type: null,\n        data: null\n      },\n      contactName: '',\n      client: {\n        type: null,\n        data: null\n      },\n      lines: [],\n      total: {\n        net: 0,\n        tax: 0\n      },\n      state: 'draft',\n      isActive: true,\n      currency: null\n    },\n    errors: null,\n    optionalUser: {\n      name: null,\n      email: null\n    }\n  },\n  mutations: {\n    SET_INCOMES: function SET_INCOMES(state, payload) {\n      state.incomes = payload;\n    },\n    SET_INCOME: function SET_INCOME(state, payload) {\n      if (payload._id) {\n        state.income = payload;\n      } else {\n        if (payload.second_level) {\n          state.income[payload.attr][payload.second_level] = payload.value;\n        } else {\n          state.income[payload.attr] = payload.value;\n        }\n      }\n    },\n    SET_OPTIONAL_CONTACT: function SET_OPTIONAL_CONTACT(state, payload) {\n      state.optionalUser = payload;\n    },\n    INVOICE: function INVOICE(state, payload) {\n      invoice_generator(payload);\n    },\n    ANULATE: function ANULATE(state) {\n      state.income.isActive = false;\n    },\n    CLEAN: function CLEAN(state) {\n      state.income = {\n        name: null,\n        description: null,\n        dates: {\n          expiration: null\n        },\n        creator: null,\n        responsable: {\n          type: null,\n          data: null\n        },\n        contactName: '',\n        client: {\n          type: null,\n          data: null\n        },\n        lines: [],\n        total: {\n          net: 0,\n          tax: 0\n        },\n        state: null,\n        isActive: true,\n        currency: null\n      };\n    },\n    SHARE: function SHARE(state, payload) {\n      if (payload.name) {\n        console.log('SHARE!');\n      } else {\n        console.log('Â¡NO PAYLOAD!');\n      }\n    },\n    DELETE_LINE: function DELETE_LINE(state, payload) {\n      var index = state.income.lines.indexOf(payload);\n      state.income.lines.splice(index, 1);\n    },\n    ADD_LINE: function ADD_LINE(state, payload) {\n      var index = state.income.lines.indexOf(payload);\n\n      if (index == -1) {\n        state.income.lines.unshift(payload);\n      } else {\n        state.income.lines[index] = payload;\n      }\n    },\n    ERRORS: function ERRORS(state, payload) {\n      state.errors = payload;\n    },\n    SLICE_INCOME: function SLICE_INCOME(state, payload) {\n      var index = state.incomes.docs.findIndex(function (x) {\n        return x._id == payload._id;\n      });\n      state.incomes.docs.splice(index, 1);\n    }\n  },\n  actions: {\n    createInvoice: function createInvoice(_ref, payload) {\n      var commit = _ref.commit;\n      return new _Promise(function (resolve, reject) {\n        commit('INVOICE', payload);\n        resolve(payload);\n      });\n    },\n    getAllIncomes: function getAllIncomes(_ref2, payload) {\n      var commit = _ref2.commit;\n      console.log(payload);\n      return new _Promise(function (resolve, reject) {\n        axios.get(api + '/movements/' + (payload.isBusiness != '' ? 'business' : 'personal') + '/' + payload.type + payload.isBusiness + '?' + payload.params).then(function (data) {\n          console.log('movimientos -> ', data.data);\n          commit('SET_INCOMES', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          commit('ERRORS', err);\n          reject(err, err.response);\n        });\n      });\n    },\n    getIncome: function getIncome(_ref3, payload) {\n      var commit = _ref3.commit;\n      // console.log(payload);\n      return new _Promise(function (resolve, reject) {\n        axios.get(api + '/movements/' + payload).then(function (data) {\n          console.log('INCOME -> ', data.data);\n          commit('SET_INCOME', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          console.log(err);\n          reject(err, err.response);\n        });\n      });\n    },\n    postIncome: function postIncome(_ref4, payload) {\n      var commit = _ref4.commit;\n      console.log(\"ANTES DEL TRANSFORM -> \", payload); // CHECK PARA CUANDO ES EMPRESA\n\n      if (payload.responsable.type && payload.responsable.type != null) {\n        if (payload.responsable.data._id == this.getters['users/user']._id) {\n          var businessCheck = this.getters['getBusinessScope'];\n\n          if (businessCheck._id) {\n            payload.responsable.data = businessCheck;\n            payload.responsable.type = 'Business';\n          } else {\n            payload.responsable.data = payload.responsable.data;\n          }\n\n          businessCheck._id ? payload.isBusiness = true : payload.isBusiness = false;\n        }\n      }\n\n      if (payload.client.type && payload.client.type != null) {\n        if (payload.client.data._id == this.getters['users/user']._id) {\n          var _businessCheck = this.getters['getBusinessScope'];\n\n          if (_businessCheck._id) {\n            payload.client.data = _businessCheck;\n            payload.client.type = 'Business';\n          } else {\n            payload.client.data = payload.client.data;\n          }\n\n          ;\n          _businessCheck._id ? payload.isBusiness = true : payload.isBusiness = false;\n        }\n      }\n\n      payload.responsable.data.legalName != undefined ? payload.responsable.type = 'Business' : payload.responsable.type;\n      payload.client.data.legalName != undefined ? payload.client.type = 'Business' : payload.client.type;\n      payload.currency = this.getters['users/user'].currency;\n      console.warn('!POST MOVEMENT!', payload);\n      return new _Promise(function (resolve, reject) {\n        axios.post(api + '/movements/', payload).then(function (data) {\n          commit('SET_INCOME', data.data);\n          resolve(data.data);\n          console.warn('data.data => ', data.data);\n        }).catch(function (err) {\n          reject(err, err.response);\n        });\n      });\n    },\n    postLine: function postLine(_ref5, payload) {\n      var commit = _ref5.commit;\n      console.log(payload);\n      if (payload.tax) payload.tax = payload.tax.length == 0 ? null : payload.tax;\n      return new _Promise(function (resolve, reject) {\n        axios.post(api + '/lines', payload).then(function (data) {\n          commit('ADD_LINE', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          reject(err, err.response);\n        });\n      });\n    },\n    putLine: function putLine(_ref6, payload) {\n      var commit = _ref6.commit;\n      return new _Promise(function (resolve, reject) {\n        axios.put(api + '/lines/' + payload._id, payload).then(function (data) {\n          resolve(data.data);\n        }).catch(function (err) {\n          reject(err, err.response);\n        });\n      });\n    },\n    deleteLine: function deleteLine(_ref7, payload) {\n      var commit = _ref7.commit;\n      return new _Promise(function (resolve, reject) {\n        axios.delete(api + '/lines/' + payload._id, payload).then(function (data) {\n          commit('DELETE_LINE', payload);\n          resolve(payload);\n        }).catch(function (err) {\n          reject(err, err.response);\n        });\n      });\n    },\n    putIncome: function putIncome(_ref8, payload) {\n      var commit = _ref8.commit;\n      console.log(payload);\n      return new _Promise(function (resolve, reject) {\n        axios.put(api + '/movements/' + payload._id, payload).then(function (data) {\n          console.log('put income -> ', data.data);\n          resolve(data.data);\n        }).catch(function (err) {\n          reject(err, err.response);\n        });\n      });\n    },\n    anulateIncome: function anulateIncome(_ref9, payload) {\n      var state = _ref9.state,\n          commit = _ref9.commit;\n      return new _Promise(function (resolve, reject) {\n        commit('ANULATE', payload);\n        axios.put(api + '/movements/' + payload._id, payload).then(function (data) {\n          resolve(true);\n        }).catch(function (err) {\n          reject(err, err.response);\n        });\n      });\n    },\n    shareIncome: function shareIncome(_ref10, payload) {\n      var state = _ref10.state,\n          commit = _ref10.commit;\n      return new _Promise(function (resolve, reject) {\n        console.log(state);\n        console.log(payload);\n        var obj = {\n          to: payload.client.type == 'User' ? payload.client.data.emails[0].email : payload.client.type == 'Contact' ? payload.client.data.email : state.optionalUser.email,\n          subject: (payload.responsable.type ? payload.responsable.data.name : payload.responsable.name) + ' te envio una cotizaciÃ³n',\n          html: \" <p>&nbsp;</p>\\n          <table border=\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\\n          <tbody>\\n          <tr>\\n          <td style=\\\"padding: 10px 0 30px 0;\\\">\\n          <table style=\\\"border: 1px solid #cccccc; border-collapse: collapse;\\\" border=\\\"0\\\" width=\\\"600\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" align=\\\"center\\\">\\n          <tbody>\\n          <tr>\\n          <td style=\\\"padding: 40px 0 30px 0; color: #153643; font-size: 28px; font-weight: bold; font-family: Arial, sans-serif;\\\" align=\\\"center\\\" bgcolor=\\\"#fafafa\\\"><img style=\\\"display: block; width: 100px;\\n          height: 100px;\\\" src=\\\"https://unabase.net/img/logotipo.png\\\" alt=\\\"Logotipo unabase\\\" width=\\\"300\\\" height=\\\"230\\\" /></td>\\n          </tr>\\n          <tr>\\n          <td style=\\\"padding: 40px 30px 40px 30px;\\\" bgcolor=\\\"#ffffff\\\">\\n          <table border=\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\\n          <tbody>\\n          <tr>\\n          <td style=\\\"color: #153643; font-family: Arial, sans-serif; font-size: 24px;\\\"><strong>&iexcl;Hola!,\".concat(payload.client.type == 'User' ? payload.client.data.name : payload.client.type == 'Contact' ? payload.client.data.name : state.optionalUser.name, \"</strong></td>\\n          </tr>\\n          <tr>\\n          <td style=\\\"padding: 20px 0 30px 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px;\\\">\") + payload.responsable.data.name + \" te ha cotizado en <strong>Unabase</strong>, ingresa y revisa la cotizaci&oacute;n.</td>\\n          </tr>\\n          <tr>\\n          <td style=\\\"padding: 20px 0 30px 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px;\\\">\\n          <table border=\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\\n          <tbody>\\n          <tr>\\n          \\n          <td>\\n          <br>\\n          <center>\\n          <h3>\" + payload.name + \"</h3>\\n          </center>\\n          <br>\\n\\n           <center>\\n           \\n          <center>\\n          <h4>Principales items dentro de la cotizaci&oacute;n</h4>\\n          </center></td>\\n          </tr>\\n          <tr>\\n          <td style=\\\"font-size: 17px; line-height: 15px;\\\">\\n           \\n          <br />\\n          <center>\\n         <ul id=\\\"ul1\\\" style=\\\" border:none;\\n         padding: 0;\\n         display:table;\\n         width:100%;\\n         box-sizing:border-box;\\n         -moz-box-sizing:border-box;\\n         -webkit-box-sizing:border-box;\\\">\\n         <center>\\n         <li style=\\\"display:table-cell;\\\"><center>\".concat(payload.lines[0].name.toUpperCase(), \"</center></li>\\n         \\n         </center>\\n          \\n         </ul>\\n          </center>\\n\\n          <center>\\n         <ul id=\\\"ul1\\\" style=\\\" border:none;\\n         padding: 0;\\n         display:table;\\n         width:100%;\\n         box-sizing:border-box;\\n         -moz-box-sizing:border-box;\\n         -webkit-box-sizing:border-box;\\\">\\n          <center>\\n          <li style=\\\"display:table-cell;\\\"><center>\").concat(payload.lines[1] ? payload.lines[1].name.toUpperCase() : '', \"</center></li>\\n         \\n          </center>\\n          \\n         </ul>\\n          </center>\\n\\n          <center>\\n         <ul id=\\\"ul1\\\" style=\\\" border:none;\\n         padding: 0;\\n         display:table;\\n         width:100%;\\n         box-sizing:border-box;\\n         -moz-box-sizing:border-box;\\n         -webkit-box-sizing:border-box;\\\">\\n         <center>\\n         <li style=\\\"display:table-cell;\\\"><center>\").concat(payload.lines[2] ? payload.lines[2].name.toUpperCase() : '', \"</center></li>\\n        \\n         </center>\\n          \\n         </ul>\\n          </center>\\n         \\n           </center>\\n          \\n          </td>\\n          </tr>\\n          </tbody>\\n          </table>\\n          </td>\\n          </tr>\\n          <tr>\\n          <td><center><a style=\\\"display: block; width: 115px; height: 25px; font-style: none; background: #01C73E; padding: 10px; text-align: center; border-radius: 5px; color: white; font-weight: bold; text-decoration: none;\\\" href=\\\"https://app.unabase.com/movement/\") + payload._id + \"\\\">Ver mi compra</a></center></td>\\n          </tr>\\n          <tr>\\n          <td>\\n          <table border=\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\\n          <tbody>\\n          <tr>\\n          <td valign=\\\"top\\\" width=\\\"260\\\"><br /> <br />\\n          <table border=\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\\n          <tbody>\\n          <tr>\\n          <td><center>\\n          <h4>Vendedor</h4>\\n          <hr>\\n          </center></td>\\n          </tr>\\n          <tr>\\n          <td style=\\\"padding: 25px 0 0 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px;\\\"><center><img style=\\\"border-radius: 50px;\\\" src=\\\"\".concat(payload.responsable.data.imgUrl, \"\\\"/></center></td>\\n          <td style=\\\"padding: 25px 0 0 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px;\\\"><center>\\n          <p>\") + payload.responsable.data.name + \"</p>\\n          <strong>\".concat(payload.responsable.data.idNumber ? payload.responsable.data.idNumber : 'Sin documento de identidad', \" </strong> <br /> <strong>\").concat(payload.responsable.data.emails[0] ? payload.responsable.data.emails[0].email : 'Sin email', \" </strong></center></td>\\n          </tr>\\n          </tbody>\\n          </table>\\n          </td>\\n          </tr>\\n          </tbody>\\n          </table>\\n          </td>\\n          </tr>\\n          </tbody>\\n          </table>\\n          </td>\\n          </tr>\\n          <tr>\\n          <td style=\\\"padding: 30px 30px 30px 30px;\\\" bgcolor=\\\"#01C73E\\\">\\n          <table border=\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\\n          <tbody>\\n          <tr>\\n          <td style=\\\"color: #ffffff; font-family: Arial, sans-serif; font-size: 14px;\\\" width=\\\"75%\\\">&reg; Unabase, derechos reservados, 2018.<br /> <a style=\\\"color: #ffffff;\\\" href=\\\"http://www.unabase.cl/\\\"><span style=\\\"color: #ffffff;\\\">Ir a pagina principal</span></a></td>\\n          \\n          </tr>\\n          </tbody>\\n          </table>\\n          </td>\\n          </tr>\\n          </tbody>\\n          </table>\\n          </td>\\n          </tr>\\n          </tbody>\\n          </table> \")\n        };\n        axios.post(api + '/mailer', obj).then(function (data) {\n          // commit('SHARE', payload);\n          resolve(data.data);\n        }).catch(function (err) {// reject(err, err.response);\n        });\n      });\n    }\n  },\n  getters: {\n    getIncomes: function getIncomes(state) {\n      return state.incomes;\n    },\n    getIncome: function getIncome(state) {\n      return state.income;\n    },\n    getErrors: function getErrors(state) {\n      return state.errors;\n    }\n  }\n};",{"version":3,"sources":["/home/desarrollo/Escritorio/unabasev4/src/store/modules/incomes.js"],"names":["axios","api","invoice_generator","namespaced","state","incomes","income","name","description","dates","expiration","Date","creator","responsable","type","data","contactName","client","lines","total","net","tax","isActive","currency","errors","optionalUser","email","mutations","SET_INCOMES","payload","SET_INCOME","_id","second_level","attr","value","SET_OPTIONAL_CONTACT","INVOICE","ANULATE","CLEAN","SHARE","console","log","DELETE_LINE","index","indexOf","splice","ADD_LINE","unshift","ERRORS","SLICE_INCOME","docs","findIndex","x","actions","createInvoice","commit","resolve","reject","getAllIncomes","get","isBusiness","params","then","catch","err","response","getIncome","postIncome","getters","businessCheck","legalName","undefined","warn","post","postLine","length","putLine","put","deleteLine","delete","putIncome","anulateIncome","shareIncome","obj","to","emails","subject","html","toUpperCase","imgUrl","idNumber","getIncomes","getErrors"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport api from '../../lib/api';\nimport invoice_generator from '../../assets/js/invoice';\n\nexport default {\n  namespaced: true,\n  state: {\n    incomes: [],\n    income: {\n      name: null,\n      description: null,\n      dates: {\n        expiration: new Date()\n      },\n\n      creator: null,\n\n      responsable: {\n        type: null,\n        data: null\n      },\n      contactName: '',\n      client: {\n        type: null,\n        data: null\n      },\n\n      lines: [],\n      total: {\n        net: 0,\n        tax: 0\n      },\n\n      state: 'draft',\n      isActive: true,\n      currency: null\n    },\n\n    errors: null,\n    optionalUser: {\n      name: null,\n      email: null\n    }\n  },\n  mutations: {\n    SET_INCOMES(state, payload) {\n      state.incomes = payload;\n    },\n    SET_INCOME(state, payload) {\n      if (payload._id) {\n        state.income = payload;\n      } else {\n        if (payload.second_level) {\n          state.income[payload.attr][payload.second_level] = payload.value;\n        } else {\n          state.income[payload.attr] = payload.value;\n        }\n      }\n    },\n    SET_OPTIONAL_CONTACT(state, payload) {\n      state.optionalUser = payload;\n    },\n\n    INVOICE(state, payload) {\n      invoice_generator(payload);\n    },\n\n    ANULATE(state) {\n      state.income.isActive = false;\n    },\n\n    CLEAN(state) {\n      state.income = {\n        name: null,\n        description: null,\n        dates: {\n          expiration: null\n        },\n\n        creator: null,\n\n        responsable: {\n          type: null,\n          data: null\n        },\n        contactName: '',\n        client: {\n          type: null,\n          data: null\n        },\n\n        lines: [],\n        total: {\n          net: 0,\n          tax: 0\n        },\n        state: null,\n        isActive: true,\n        currency: null\n      };\n    },\n\n    SHARE(state, payload) {\n      if (payload.name) {\n        console.log('SHARE!');\n      } else {\n        console.log('Â¡NO PAYLOAD!');\n      }\n    },\n\n    DELETE_LINE(state, payload) {\n      let index = state.income.lines.indexOf(payload);\n      state.income.lines.splice(index, 1);\n    },\n\n    ADD_LINE(state, payload) {\n      let index = state.income.lines.indexOf(payload);\n\n      if (index == -1) {\n        state.income.lines.unshift(payload);\n      } else {\n        state.income.lines[index] = payload;\n      }\n    },\n\n    ERRORS(state, payload) {\n      state.errors = payload;\n    },\n\n    SLICE_INCOME(state, payload) {\n      let index = state.incomes.docs.findIndex(x => x._id == payload._id)\n      state.incomes.docs.splice(index, 1)\n    }\n\n  },\n\n  actions: {\n    createInvoice({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        commit('INVOICE', payload);\n        resolve(payload);\n      });\n    },\n    getAllIncomes({\n      commit\n    }, payload) {\n      console.log(payload)\n      return new Promise((resolve, reject) => {\n        axios\n          .get(\n            api + '/movements/' + ((payload.isBusiness != '') ? 'business' : 'personal') + '/' + payload.type + payload.isBusiness + '?' + payload.params\n          )\n          .then(data => {\n            console.log('movimientos -> ', data.data);\n\n            commit('SET_INCOMES', data.data);\n            resolve(data.data);\n          })\n          .catch(err => {\n            commit('ERRORS', err);\n            reject(err, err.response);\n          });\n      });\n    },\n\n    getIncome({\n      commit\n    }, payload) {\n      // console.log(payload);\n      return new Promise((resolve, reject) => {\n        axios\n          .get(api + '/movements/' + payload)\n          .then(data => {\n            console.log('INCOME -> ', data.data);\n            commit('SET_INCOME', data.data);\n            resolve(data.data);\n          })\n          .catch(err => {\n            console.log(err);\n            reject(err, err.response);\n          });\n      });\n    },\n\n    postIncome({\n      commit\n    }, payload) {\n      console.log(\"ANTES DEL TRANSFORM -> \", payload);\n      // CHECK PARA CUANDO ES EMPRESA\n      if (payload.responsable.type && payload.responsable.type != null) {\n\n        if (payload.responsable.data._id == this.getters['users/user']._id) {\n          let businessCheck = this.getters['getBusinessScope'];\n          if (businessCheck._id) {\n            payload.responsable.data = businessCheck\n            payload.responsable.type = 'Business'\n\n          } else {\n            payload.responsable.data = payload.responsable.data\n          }\n          (businessCheck._id) ? payload.isBusiness = true: payload.isBusiness = false\n        }\n      }\n\n      if (payload.client.type && payload.client.type != null) {\n\n        if (payload.client.data._id == this.getters['users/user']._id) {\n          let businessCheck = this.getters['getBusinessScope'];\n          if (businessCheck._id) {\n            payload.client.data = businessCheck\n            payload.client.type = 'Business'\n          } else {\n            payload.client.data = payload.client.data\n          };\n          (businessCheck._id) ? payload.isBusiness = true: payload.isBusiness = false\n        }\n      }\n\n\n      (payload.responsable.data.legalName != undefined) ? payload.responsable.type = 'Business': payload.responsable.type;\n      (payload.client.data.legalName != undefined) ? payload.client.type = 'Business': payload.client.type;\n      payload.currency = this.getters['users/user'].currency\n      console.warn('!POST MOVEMENT!', payload);\n\n      return new Promise((resolve, reject) => {\n        axios\n          .post(api + '/movements/', payload)\n          .then(data => {\n            commit('SET_INCOME', data.data);\n            resolve(data.data);\n            console.warn('data.data => ', data.data);\n\n          })\n          .catch(err => {\n            reject(err, err.response);\n          });\n      });\n    },\n\n    postLine({\n      commit\n    }, payload) {\n      console.log(payload);\n      if (payload.tax) payload.tax = (payload.tax.length == 0) ? null : payload.tax\n      return new Promise((resolve, reject) => {\n        axios\n          .post(api + '/lines', payload)\n          .then(data => {\n            commit('ADD_LINE', data.data);\n            resolve(data.data);\n          })\n          .catch(err => {\n            reject(err, err.response);\n          });\n      });\n    },\n\n    putLine({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        axios\n          .put(api + '/lines/' + payload._id, payload)\n          .then(data => {\n            resolve(data.data);\n          })\n          .catch(err => {\n            reject(err, err.response);\n          });\n      });\n    },\n\n    deleteLine({\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        axios\n          .delete(api + '/lines/' + payload._id, payload)\n          .then(data => {\n            commit('DELETE_LINE', payload);\n            resolve(payload);\n          })\n          .catch(err => {\n            reject(err, err.response);\n          });\n      });\n    },\n\n    putIncome({\n      commit\n    }, payload) {\n      console.log(payload);\n      return new Promise((resolve, reject) => {\n        axios\n          .put(api + '/movements/' + payload._id, payload)\n          .then(data => {\n            console.log('put income -> ', data.data);\n            resolve(data.data);\n          })\n          .catch(err => {\n            reject(err, err.response);\n          });\n      });\n    },\n\n    anulateIncome({\n      state,\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        commit('ANULATE', payload);\n        axios\n          .put(api + '/movements/' + payload._id, payload)\n          .then(data => {\n            resolve(true);\n          })\n          .catch(err => {\n            reject(err, err.response);\n          });\n      });\n    },\n\n    shareIncome({\n      state,\n      commit\n    }, payload) {\n      return new Promise((resolve, reject) => {\n        console.log(state);\n        console.log(payload);\n\n        let obj = {\n          to: payload.client.type == 'User' ?\n            payload.client.data.emails[0].email : (payload.client.type == 'Contact') ?\n            payload.client.data.email : state.optionalUser.email,\n\n          subject: (payload.responsable.type ?\n            payload.responsable.data.name :\n            payload.responsable.name) + ' te envio una cotizaciÃ³n',\n          html: ` <p>&nbsp;</p>\n          <table border=\"0\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\n          <tbody>\n          <tr>\n          <td style=\"padding: 10px 0 30px 0;\">\n          <table style=\"border: 1px solid #cccccc; border-collapse: collapse;\" border=\"0\" width=\"600\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\">\n          <tbody>\n          <tr>\n          <td style=\"padding: 40px 0 30px 0; color: #153643; font-size: 28px; font-weight: bold; font-family: Arial, sans-serif;\" align=\"center\" bgcolor=\"#fafafa\"><img style=\"display: block; width: 100px;\n          height: 100px;\" src=\"https://unabase.net/img/logotipo.png\" alt=\"Logotipo unabase\" width=\"300\" height=\"230\" /></td>\n          </tr>\n          <tr>\n          <td style=\"padding: 40px 30px 40px 30px;\" bgcolor=\"#ffffff\">\n          <table border=\"0\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\n          <tbody>\n          <tr>\n          <td style=\"color: #153643; font-family: Arial, sans-serif; font-size: 24px;\"><strong>&iexcl;Hola!,${\n            payload.client.type == 'User'\n              ? payload.client.data.name\n              : payload.client.type == 'Contact'\n              ? payload.client.data.name\n              : state.optionalUser.name\n          }</strong></td>\n          </tr>\n          <tr>\n          <td style=\"padding: 20px 0 30px 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px;\">` +\n            payload.responsable.data.name +\n            ` te ha cotizado en <strong>Unabase</strong>, ingresa y revisa la cotizaci&oacute;n.</td>\n          </tr>\n          <tr>\n          <td style=\"padding: 20px 0 30px 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px;\">\n          <table border=\"0\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\n          <tbody>\n          <tr>\n          \n          <td>\n          <br>\n          <center>\n          <h3>` +\n            payload.name +\n            `</h3>\n          </center>\n          <br>\n\n           <center>\n           \n          <center>\n          <h4>Principales items dentro de la cotizaci&oacute;n</h4>\n          </center></td>\n          </tr>\n          <tr>\n          <td style=\"font-size: 17px; line-height: 15px;\">\n           \n          <br />\n          <center>\n         <ul id=\"ul1\" style=\" border:none;\n         padding: 0;\n         display:table;\n         width:100%;\n         box-sizing:border-box;\n         -moz-box-sizing:border-box;\n         -webkit-box-sizing:border-box;\">\n         <center>\n         <li style=\"display:table-cell;\"><center>${payload.lines[0].name.toUpperCase()}</center></li>\n         \n         </center>\n          \n         </ul>\n          </center>\n\n          <center>\n         <ul id=\"ul1\" style=\" border:none;\n         padding: 0;\n         display:table;\n         width:100%;\n         box-sizing:border-box;\n         -moz-box-sizing:border-box;\n         -webkit-box-sizing:border-box;\">\n          <center>\n          <li style=\"display:table-cell;\"><center>${\n            payload.lines[1] ? payload.lines[1].name.toUpperCase() : ''\n          }</center></li>\n         \n          </center>\n          \n         </ul>\n          </center>\n\n          <center>\n         <ul id=\"ul1\" style=\" border:none;\n         padding: 0;\n         display:table;\n         width:100%;\n         box-sizing:border-box;\n         -moz-box-sizing:border-box;\n         -webkit-box-sizing:border-box;\">\n         <center>\n         <li style=\"display:table-cell;\"><center>${\n           payload.lines[2] ? payload.lines[2].name.toUpperCase() : ''\n         }</center></li>\n        \n         </center>\n          \n         </ul>\n          </center>\n         \n           </center>\n          \n          </td>\n          </tr>\n          </tbody>\n          </table>\n          </td>\n          </tr>\n          <tr>\n          <td><center><a style=\"display: block; width: 115px; height: 25px; font-style: none; background: #01C73E; padding: 10px; text-align: center; border-radius: 5px; color: white; font-weight: bold; text-decoration: none;\" href=\"https://app.unabase.com/movement/` +\n            payload._id +\n            `\">Ver mi compra</a></center></td>\n          </tr>\n          <tr>\n          <td>\n          <table border=\"0\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\n          <tbody>\n          <tr>\n          <td valign=\"top\" width=\"260\"><br /> <br />\n          <table border=\"0\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\n          <tbody>\n          <tr>\n          <td><center>\n          <h4>Vendedor</h4>\n          <hr>\n          </center></td>\n          </tr>\n          <tr>\n          <td style=\"padding: 25px 0 0 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px;\"><center><img style=\"border-radius: 50px;\" src=\"${\n            payload.responsable.data.imgUrl\n          }\"/></center></td>\n          <td style=\"padding: 25px 0 0 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px;\"><center>\n          <p>` +\n            payload.responsable.data.name +\n            `</p>\n          <strong>${\n            payload.responsable.data.idNumber\n              ? payload.responsable.data.idNumber\n              : 'Sin documento de identidad'\n          } </strong> <br /> <strong>${\n              payload.responsable.data.emails[0]\n                ? payload.responsable.data.emails[0].email\n                : 'Sin email'\n            } </strong></center></td>\n          </tr>\n          </tbody>\n          </table>\n          </td>\n          </tr>\n          </tbody>\n          </table>\n          </td>\n          </tr>\n          </tbody>\n          </table>\n          </td>\n          </tr>\n          <tr>\n          <td style=\"padding: 30px 30px 30px 30px;\" bgcolor=\"#01C73E\">\n          <table border=\"0\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\n          <tbody>\n          <tr>\n          <td style=\"color: #ffffff; font-family: Arial, sans-serif; font-size: 14px;\" width=\"75%\">&reg; Unabase, derechos reservados, 2018.<br /> <a style=\"color: #ffffff;\" href=\"http://www.unabase.cl/\"><span style=\"color: #ffffff;\">Ir a pagina principal</span></a></td>\n          \n          </tr>\n          </tbody>\n          </table>\n          </td>\n          </tr>\n          </tbody>\n          </table>\n          </td>\n          </tr>\n          </tbody>\n          </table> `\n        };\n\n        axios\n          .post(api + '/mailer', obj)\n          .then(data => {\n            // commit('SHARE', payload);\n            resolve(data.data);\n          })\n          .catch(err => {\n            // reject(err, err.response);\n          });\n      });\n    }\n  },\n  getters: {\n    getIncomes: state => state.incomes,\n    getIncome: state => state.income,\n    getErrors: state => state.errors\n  }\n};\n"]}]}