(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b7b"],{"47a0":function(t,e,a){},8233:function(t,e,a){"use strict";var i=a("ba9d"),n=a.n(i);n.a},"986f":function(t,e){t.exports="data:image/png;base64,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"},b1ca:function(t,e,a){"use strict";var i=a("47a0"),n=a.n(i);n.a},ba9d:function(t,e,a){},fa38:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.inMobile?i("md-dialog",{attrs:{"md-active":t.getShowDialogIncome},on:{"update:mdActive":function(e){t.getShowDialogIncome=e},"update:md-active":function(e){t.getShowDialogIncome=e}}},[i("md-content",[i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-45 md-small-size-100",staticStyle:{padding:"0"}},[t.inMobile&&t.getShowDialogIncome?i("item-form",{attrs:{item:t.getItem}}):t._e()],1)])]),i("md-dialog-actions",[i("dialog-button",{staticStyle:{"z-index":"1000"},attrs:{colorClass:"md-success",buttonName:"AGREGAR"},on:{clickFunction:function(e){return t.addLine()}}})],1),i("br")],1):t._e(),t.dialogContactDetail?i("modal",{on:{close:t.showContactDetail}},[i("template",{slot:"header"},[i("md-button",{staticClass:"md-simple md-just-icon md-round modal-default-button",on:{click:t.showContactDetail}},[i("md-icon",[t._v("clear")])],1)],1),i("template",{slot:"body"},[t.INCOME.client.data||null!=t.INCOME.client.data?i("center",[t.INCOME.client.type&&"User"==t.INCOME.client.type?i("div",{staticClass:"md-layout-item md-size-10 md-small-size-20 valign-wrapper"},[t.INCOME.client.data.imgUrl?i("md-avatar",[i("img",{attrs:{src:t.getUserImg(),alt:"Avatar"},on:{click:t.showContactDetail}})]):i("md-avatar",[i("img",{attrs:{src:a("1b36"),alt:"Avatar"},on:{click:t.showContactDetail}})])],1):i("div",{staticClass:"md-layout-item md-size-10 md-small-size-20 valign-wrapper"},[i("md-avatar",[i("img",{attrs:{src:a("986f"),alt:"Avatar"},on:{click:t.showContactDetail}})])],1),i("b",[t._v(t._s(t.getUserName()))])]):t._e(),t.INCOME.client.data&&null!=t.INCOME.client.data?t._e():i("center",[i("h6",[t._v('" '+t._s(t.INCOME.contactName&&null!=t.INCOME.contactName?t.INCOME.contactName:t.INCOME.client.name)+' " no existe')]),i("md-button",{staticClass:"md-success md-raised"},[t._v("AÃ±adir a contactos")])],1)],1),i("template",{slot:"footer"},[t.INCOME.client.type?i("md-button",{staticClass:"md-info md-simple"},[t._v("Ver contacto")]):t._e()],1)],2):t._e(),i("md-dialog",{attrs:{"md-active":t.showDialogMessage},on:{"update:mdActive":function(e){t.showDialogMessage=e},"update:md-active":function(e){t.showDialogMessage=e}}},[i("md-content",[i("md-dialog-title",[i("div",{staticClass:"row"},[i("div",{staticClass:"col s4"},[i("span",{staticClass:"left"})]),i("div",{staticClass:"col s4"}),i("div",{staticClass:"col s4"},[i("span",{staticClass:"right",on:{click:function(e){return t.displayDialogMsg(!1,!1,!1,!0)}}},[i("md-icon",[t._v("close")])],1)])])]),i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100 md-small-size-100",staticStyle:{padding:"0"}},[i("commentsModule",{attrs:{movement:t.INCOME}})],1)]),i("md-dialog-actions",[i("dialog-button",{staticStyle:{"z-index":"100"},attrs:{colorClass:"md-success",buttonName:"Enviar comentario"},on:{clickFunction:t.newComment}})],1)],1)],1),i("md-dialog",{attrs:{"md-active":t.showDialogContac},on:{"update:mdActive":function(e){t.showDialogContac=e},"update:md-active":function(e){t.showDialogContac=e}}},[i("md-dialog-title",[i("div",{staticClass:"row"},[i("div",{staticClass:"col s4"}),i("div",{staticClass:"col s4"}),i("div",{staticClass:"col s4"},[i("span",{staticClass:"right",on:{click:function(e){return t.displayDialogContact(!1,!1,!1,!0)}}},[i("md-icon",[t._v("close")])],1)])])]),i("md-content",[i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100 md-small-size-100",staticStyle:{padding:"0"}},[i("new-contact")],1)])]),i("md-dialog-actions",[i("dialog-button",{staticStyle:{"z-index":"100"},attrs:{colorClass:"md-success",buttonName:"Crear contacto"},on:{clickFunction:t.newContact}})],1),i("br")],1),t.optionalEmail?i("modal",{on:{close:function(e){return t.handleOptionalEmailModal(!1)}}},[i("template",{slot:"header"},[i("md-button",{staticClass:"md-simple md-just-icon md-round modal-default-button",on:{click:function(e){return t.handleOptionalEmailModal(!1)}}},[i("md-icon",[t._v("clear")])],1)],1),i("template",{slot:"body"},[i("div",{staticClass:"container-fluid"},[i("center",[i("small",[t._v('Ingresa el correo de "'+t._s(this.getIncome.client.name.toUpperCase())+'"')]),i("md-field",[i("md-input",{attrs:{placeholder:"email@gmail.com"},nativeOn:{input:function(e){return t.setOpcionalUser(e.target)}}})],1)],1)],1)]),i("template",{slot:"footer"},[i("center",[i("md-button",{staticClass:"md-success md-dense",attrs:{type:"email"},on:{click:function(e){return t.saveOptionalUser()}}},[t._v("Enviar")])],1)],1)],2):t._e(),t.loading?i("div",[i("spinner")],1):i("div",[i("md-card",{staticStyle:{margin:"0 !important","border-bottom":"none","box-shadow":"none"}},[i("md-card-header",{staticClass:"md-small-hide"}),i("md-card-content",{staticStyle:{padding:"0"}},[i("slide-y-up-transition",[t.getSeeDetails?i("div",{staticClass:"md-layout valign-wrapper"},[i("div",{staticClass:"md-layout-item md-size-50 md-small-size-100",attrs:{id:"textField"}},[i("br"),i("v-text-field",{attrs:{outline:"",id:"noMaterialize",name:"name",autofocus:"",color:"green","background-color":"grey lighten-2",label:"Referencia","prepend-inner-icon":"note_add",value:t.getIncome.name},nativeOn:{input:function(e){return t.updateIncome(e.target)}}})],1),i("div",{class:["md-layout-item md-size-50 md-small-size-100",t.inMobile?"containerMobile":"containerDesktop"],staticStyle:{padding:"0"}},[i("div",{staticClass:"md-layout md-alignment-center-center"},[i("div",{staticClass:"md-layout-item md-size-80",attrs:{id:"textField"}},[i("md-field",[i("autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{width:"100%","margin-top":"6%"},attrs:{config:t.acomplete},on:{clickOnItem:t.updateIncome,clickOnCreate:t.createContact,optionalInputFunction:t.updateIncome,blurEvent:t.blurAction}})],1)],1),i("div",{staticClass:"md-layout-item md-size-20"},[i("center",["User"==t.INCOME.client.type?i("center",[t.INCOME.client.data.imgUrl?i("v-avatar",{attrs:{tile:!1,size:t.inMobile?50:60}},[i("img",{attrs:{src:t.getUserImg(),alt:"Avatar"},on:{click:t.showContactDetail}})]):i("md-avatar",[i("img",{attrs:{src:a("1b36"),alt:"Avatar"},on:{click:t.showContactDetail}})])],1):i("center",[i("v-avatar",{attrs:{tile:!1,size:t.inMobile?50:60}},[i("img",{attrs:{src:a("986f"),alt:"avatar"},on:{click:t.showContactDetail}})])],1)],1)],1)])])]):t._e()]),t.getSeeDetails?t._e():i("div",{on:{click:function(e){return t.handleSeeDetails()}}},[i("center",[t.inMobile?i("md-content",{staticClass:"md-elevation-3"},[t.INCOME.client?i("div",[i("v-card",{staticClass:"mx-auto",attrs:{color:"white",dark:"","max-width":"400"}},[i("v-card-actions",[i("v-list-tile",{staticClass:"grow"},[(t.INCOME.client.imgUrl,i("v-list-tile-avatar",{attrs:{color:"grey darken-3"}},[i("v-img",{staticClass:"elevation-6",attrs:{src:t.getUserImg()}})],1)),i("v-list-tile-content",{staticClass:"userIncomeClass"},[i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100",staticStyle:{heigth:"0px !important",color:"black"}},[i("p",{staticStyle:{"margin-bottom":"0"}},[i("b",[t._v(t._s(t.INCOME.name))])]),i("small",{staticClass:"md-caption"},[t._v(t._s(t.getUserName()))])])])])])],1)],1)],1)],1):i("div",[i("h5",[t._v("Â¡Le faltan datos a la venta!\n                  "),i("br"),i("span",{staticStyle:{color:"blue"}},[t._v("Click aqui!")])])])]):i("div",[i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-15"},[i("div",{staticClass:"file-input img-circle",staticStyle:{"margin-left":"-0%"}},[i("div",{staticClass:"image-container"},[i("img",{staticClass:"valign-wrapper",attrs:{src:t.getUserImg()}})])])]),i("div",{staticClass:"md-layout-item md-size-70",staticStyle:{"margin-top":"-2%"}},[i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100"},[i("h3",{staticClass:"pull-left",staticStyle:{"margin-bottom":"-15px"}},[i("b",[t._v(t._s(t._f("uppercase")(t.INCOME.name)))])])])]),i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100"},[i("h4",{staticClass:"pull-left"},[t._v(t._s(t.getUserName()))])])])]),i("div",{staticClass:"md-layout-item md-size-15"},[i("center",[i("md-button",{staticClass:"md-just-icon blue darken-3 md-round md-dense"},[i("md-icon",[t._v("timeline")])],1)],1)],1)])])],1)],1),t.inMobile?i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100",staticStyle:{padding:"0"}},[i("v-btn",{staticStyle:{margin:"0 !important"},attrs:{block:"",color:"green",dark:""},on:{click:function(e){t.displayDialog(!0,!1,!0,!1),t.handleSaveIncome()}}},[t._v("Nueva linea +")])],1)]):t._e(),i("div",{staticClass:"md-layout md-big-hide",staticStyle:{height:"80vh"}},[i("div",{staticClass:"md-small-size-100 md-size-100"},[i("md-content",{nativeOn:{scroll:function(e){return t.handleScroll(e)}}},[i("item-list",{staticClass:"md-big-hide",attrs:{items:null}})],1)],1),i("totales")],1),t.inMobile?t._e():i("md-toolbar",{staticClass:"md-dense md-white",staticStyle:{"border-color":"#01C73E !important","border-style":"solid","border-radius":"10px"}},[i("div",{staticClass:"md-layout",staticStyle:{color:"black"}},[i("div",{staticClass:"md-layout-item md-size-33"},[i("center",[i("small",[t._v("SUBTOTAL")]),i("h4",{staticStyle:{"margin-top":"5px"}},[t._v(t._s(t._f("currency")(t.TOTAL.net,t.getCurrencyConfig.symbol,t.getCurrencyConfig.decimalNumber,t.getCurrencyConfig.opt)))])])],1),i("div",{staticClass:"md-layout-item md-size-33"},[i("center",[i("small",[t._v("IMPUESTO")]),i("h4",{staticStyle:{"margin-top":"5px"}},[t._v(t._s(t._f("currency")(t.TOTAL.tax,t.getCurrencyConfig.symbol,t.getCurrencyConfig.decimalNumber,t.getCurrencyConfig.opt)))])])],1),i("div",{staticClass:"md-layout-item md-size-33"},[i("center",[i("small",[t._v("TOTAL")]),i("h4",{staticStyle:{"margin-top":"5px"}},[t._v(t._s(t._f("currency")(t.TOTAL.total,t.getCurrencyConfig.symbol,t.getCurrencyConfig.decimalNumber,t.getCurrencyConfig.opt)))])])],1)])]),i("div",{staticClass:"md-layout md-small-hide"},[i("div",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[i("md-card",{staticClass:"md-elevation-5 pull-right",staticStyle:{width:"100%","z-index":"100"}},[i("md-card-header",{staticClass:"md-card-header-icon md-card-header-green"},[i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-50"},[i("h6",[t._v("ITEMS DE LA VENTA")])]),this.getIncome._id?i("div",{staticClass:"md-layout-item md-size-50"},[t.getSelectedItems.length>0?i("h6",{staticClass:"pull-right text-success",staticStyle:{cursor:"pointer"},on:{click:function(e){t.showHandleItems=!t.showHandleItems}}},[i("b",[t._v(t._s(t.getSelectedItems.length)+" Seleccionados")])]):t._e()]):t._e()])]),i("md-card-content",[i("item-list",{attrs:{items:null}})],1)],1),i("center",[i("div")])],1),i("div",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[i("md-card",{staticClass:"md-elevation-5 pull-right",staticStyle:{width:"100%","z-index":"100"}},[i("md-card-header",{staticClass:"md-card-header-icon md-card-header-green"}),i("md-card-content",[i("item-form",{attrs:{item:t.getItem}}),i("br"),t.inMobile?t._e():i("div",{staticClass:"md-layout"},[i("button",{staticClass:"btn waves-effect green accent-4",staticStyle:{"border-radius":"15px"},attrs:{type:"submit",name:"action"},on:{click:function(e){return t.handleLine()}}},[t._v("\n                    AGREGAR ITEM\n                    "),i("i",{staticClass:"material-icons right"},[t._v("add")])])])],1)],1)],1)])],1)],1)],1)],1)},n=[],s=(a("28a5"),a("f499")),o=a.n(s),l=(a("a481"),a("795b")),c=a.n(l),m=(a("7f7f"),a("ac6a"),a("cebc")),r=a("2f62"),d=a("07a4"),u=a("8f2c"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"padding-top":"0","margin-top":"-30px !important"}},[a("v-textarea",{attrs:{color:"green","background-color":"green",outline:"",counter:"",maxlength:"120",value:t.COMMENT},nativeOn:{input:function(e){return t.updateComment(e.target.value)}}},[a("div",{attrs:{slot:"label"},slot:"label"},[t._v("\n          Mensaje\n          "),a("small",[t._v("(Al "+t._s("Outcome"==t.$route.name?"Vendedor":"Comprador")+")")])])])],1)]),t.loading?a("div",[a("center",[a("small",[t._v("Cargando comentarios...")])])],1):a("div",{staticClass:"md-layout"},[t.COMMENTS.length>0?a("div",{staticClass:"md-layout-item md-size-100",staticStyle:{padding:"0","font-family":"tahoma","word-wrap":"break-word"}},[a("v-list",{attrs:{"three-line":""}},[t._l(t.COMMENTS,function(e,i){return[a("v-list-tile",{key:e._id,attrs:{avatar:""}},[a("v-list-tile-avatar",[a("img",{attrs:{src:e.creator?e.creator.imgUrl:"",alt:"People"}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.creator.name)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.text)}})],1)],1),a("v-divider",{key:i,attrs:{inset:!0}})]})],2)],1):a("div",[a("md-empty-state",{staticClass:"md-success",attrs:{"md-icon":"message","md-label":"Â¡Ningun mensaje aun!","md-description":"Â¿Que te parecio este movimiento?, hazle saber a tu cliente/proveedor"}})],1)])])},C=[],g={props:{movement:""},components:{},data:function(){return{loading:!1}},methods:Object(m["a"])({},Object(r["b"])({postComment:"comments/postComment",getAllComments:"comments/getAllComments"}),Object(r["d"])({setComment:"comments/SET_COMMENT"}),{updateComment:function(t){this.setComment(t)}}),created:function(){var t=this,e={parent:this.getIncome._id,type:"movement"};this.movement._id&&(this.loading=!0,this.getAllComments(e).then(function(e){t.loading=!1,console.log(e)}))},computed:Object(m["a"])({},Object(r["c"])({getComments:"comments/getComments",getComment:"comments/getComment",getIncome:"incomes/getIncome"}),{COMMENTS:function(t){return this.getComments},COMMENT:function(t){return this.getComment}})},p=g,v=(a("b1ca"),a("2877")),I=Object(v["a"])(p,h,C,!1,null,null,null),E=I.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100"},[i("center",[i("h3",[t._v(t._s(t.getContact.name))])])],1)]),i("br"),i("small"),i("md-divider"),i("br"),i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-80"},[i("md-field",[i("label",[t._v("Email")]),i("md-input",{attrs:{type:"email",name:"email",value:t.userName},on:{blur:function(e){return t.getContactUser()}},nativeOn:{input:function(e){return t.newContact(e.target)}}})],1)],1),i("div",{staticClass:"md-layout-item md-size-20 valign-wrapper"},[i("center",[i("md-avatar",[null==t.contact_img||t.loading?t._e():i("img",{attrs:{src:t.contact_img,alt:"Avatar"}}),null!=t.contact_img||t.loading?t._e():i("img",{attrs:{src:a("986f"),alt:"Avatar"}})])],1)],1)]),i("br"),i("center",[i("small",[t._v("Ã³")])]),i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100"},[i("md-field",[i("label",[t._v("Telefono")]),i("md-input",{attrs:{type:"text",name:"phone"},nativeOn:{input:function(e){return t.newContact(e.target)}}})],1)],1)])],1)},A=[],y={components:{},data:function(){return{contact_img:null,loading:!1,userName:""}},mounted:function(){1==this.validateEmail(this.getContact.name)?(this.userName=this.getContact.name,this.newContact({name:"email",value:this.userName})):this.userName=""},methods:Object(m["a"])({},Object(r["b"])({postContact:"contacts/postContact",findContact:"contacts/findContact"}),Object(r["d"])({setContact:"contacts/SET_CONTACT"}),{newContact:function(t){var e={attr:t.name,value:t.value};this.setContact(e)},getContactUser:function(){var t=this;this.loading=!0,this.findContact(this.getContact.email).then(function(e){t.loading=!1,t.contact_img=e.imgUrl,console.log(e)})},validateEmail:function(t){var e=/\S+@\S+\.\S+/;return e.test(t)}}),computed:Object(m["a"])({},Object(r["c"])({getUser:"users/user",getContact:"contacts/getContact"}))},b=y,O=Object(v["a"])(b,f,A,!1,null,null,null),N=O.exports,S=a("2af9"),D=a("1712"),M=a("59f6"),L=a("f06b"),T=a("4bff"),w=a("85b8"),R=a("7362"),H=a("9b36"),q=a("7c76"),z={data:function(){return{inMobile:null,loading:!1,isSale:!0,showDialogContac:!1,dialogContactDetail:!1,cleanSelected:!1,initialPosition:0,acomplete:{itemType:"users",initialValue:null,principalAtribute:"name",secondaryAtribute:"email",optionalMultipleAtribute:{1:"business",2:"legalName"},secondaryQuery:null,placeholder_value:"",searchRoute:"",res_name:"client",second_level_res:"data",optionalInputFunction_res:{0:"contactName"}},initialObject:null,createContactClicked:!1,showHandleItems:!1,selection:{edit:{price:null,quantity:null},delete:null}}},components:{Modal:S["k"],itemForm:D["a"],itemList:M["a"],autocomplete:T["a"],totales:w["a"],dialogButton:R["a"],spinner:H["a"],Tabs:S["t"],commentsModule:E,newContact:N,ZoomCenterTransition:q["f"],SlideYUpTransition:q["e"]},methods:Object(m["a"])({},Object(r["b"])({getCurrentIncome:"incomes/getIncome",postLine:"incomes/postLine",postItem:"items/postItem",putLine:"incomes/putLine",postIncome:"incomes/postIncome",putIncome:"incomes/putIncome",getAllComments:"comments/getAllComments",postComment:"comments/postComment",postContact:"contacts/postContact",shareIncome:"incomes/shareIncome",findContact:"contacts/findContact"}),Object(r["d"])({setIncome:"incomes/SET_INCOME",cleanIncome:"incomes/CLEAN",cleanItem:"items/CLEAN",setItem:"items/SET_ITEM",hideShowBottom:"HIDE_SHOW_BOTTOM",editorState:"HANDLE_EDIT",changeDialogMessage:"HANDLE_MSG_DIALOG",setContact:"contacts/SET_CONTACT",cleanContact:"contacts/CLEAN",handleOptionalEmail:"HANDLE_OPTIONAL_EMAIL",setOptionalContact:"incomes/SET_OPTIONAL_CONTACT",setComment:"comments/SET_COMMENT",showDetails:"HANDLE_DETAILS",editSelection:"items/EDIT_SELECTION",cleanSelection:"items/CLEAN_SELECTION",setGlobalsCreate:"items/SET_GLOBALS_CREATE",handleItemDialog:"HANDLE_ITEM_DIALOG",showBottomTotals:"HIDE_SHOW_TOTALS",handleSelections:"items/HANDLE_SELECTIONS"}),{displayDialog:function(t,e,a,i){this.inMobile&&(this.cleanItem(),this.handleItemDialog(t),this.hideShowBottom(e))},handleDetails:function(){this.$route.params.id?this.showDetails(!1):this.showDetails(!0)},displayDialogContact:function(t,e,a,i){void 0==e&&(t=!0,e=!1),this.showDialogContac=t,this.hideShowBottom(e)},createContact:function(t){this.setContact({attr:"name",value:t}),this.displayDialogContact(!0,!1)},displayDialogMsg:function(t,e,a,i){this.changeDialogMessage(t),this.hideShowBottom(e),this.showDetails(a)},showContactDetail:function(){this.dialogContactDetail=!this.dialogContactDetail},handleLine:function(){var t=this;this.saveIncome().then(function(e){console.log("entro AQUIIIIIIIIIIII!!!! handleLine"),t.setItem({attr:"movement",value:e._id}),console.log("termino el saveIncome -> ",e),t.isMobile?t.addLine().then(function(e){console.log("termino el add line dentro de handle line -> ",e),t.cleanItem()}):(t.addLine(),t.cleanItem())})},addLine:function(){var t=this;if(!(this.getSelectedItemsAdd.length>0))return new c.a(function(e,a){if(t.getItem.name)if(!t.getItem._id||t.getItem.justCreated)if(t.getItem.item&&""!=t.getItem.item)t.handleDetails(),t.cleanSelection("selectedItemsAdd"),t.postLine(t.getItem).then(function(a){t.inMobile?(t.displayDialog(!1,!1,!1,!0),e(a)):e(a)});else{var i={name:t.getItem.name};t.postItem(i).then(function(a){t.setItem({attr:"movementType",value:t.CR_HANDLER.type}),t.postLine(t.getItem).then(function(a){t.inMobile?(t.displayDialog(!1,!1,!1,!0),e(a)):e(a)})})}else console.log("Actualizo la linea"),t.handleDetails(),t.putLine(t.getItem).then(function(a){t.inMobile?(t.displayDialog(!1,!1,!1,!0),e(a)):e(a)});else t.$toasted.show("Seleccione un item",{type:"danger"})});this.handleDetails(),this.getSelectedItemsAdd.forEach(function(e){var a={item:t.getUserLastItems[e]._id,name:t.getUserLastItems[e].name,movement:t.getIncome._id,price:void 0!=t.getUserLastItems[e].lastPrice?t.getUserLastItems[e].lastPrice:0,quantity:1,movementType:t.CR_HANDLER.type,currency:t.getIncome.currency};t.postLine(a).then(function(e){t.inMobile&&t.displayDialog(!1,!1,!1,!0)})}),this.cleanSelection("selectedItemsAdd"),this.setGlobalsCreate(null)},updateIncome:function(t){"client"==t.name&&(this.setClientType(t),this.setMovementResponsable(this.CR_HANDLER),t.value.user&&null!=t.value.user?t.value=t.value.user:t.value.business&&null!=t.value.business?t.value=t.value.business:t.value);var e={attr:t.name,value:t.value,second_level:t.second_level_res?t.second_level_res:null};this.setIncome(e)},setClientType:function(t){var e={attr:"client",value:t.value.user&&null!=t.value.user?"User":"Contact",second_level:"type"};this.setIncome(e)},setMovementResponsable:function(t){var e=this,a=[{attr:"responsable",second_level:"type",value:"User"},{attr:"responsable",second_level:"data",value:this.getUser}];a.forEach(function(t){e.setIncome(t)})},handleSaveIncome:function(){var t=this;this.blurAction(this.getIncome.contactName).then(function(e){t.saveIncome()})},saveIncome:function(){var t=this;return new c.a(function(e,a){t.errors.items.length>0||null==t.getIncome.name?t.$toasted.show("Uno o mas campos erroneos en la venta!",{type:"danger"}):t.getIncome._id?t.putIncome(t.getIncome).then(function(a){t.cleanContact(),e(a),console.log("ACTUALIZADO!")}):(null==t.getIncome.responsable.data&&t.setMovementResponsable(t.CR_HANDLER),t.postIncome(t.INCOME).then(function(a){t.cleanContact();var i="Income"==t.$route.name?"income":"outcome";t.$router.replace("/"+i+"/"+a._id),e(a),console.log("GUARDADO!")}))})},newComment:function(){var t=this,e={parent:this.getIncome._id,type:"movement",txt:this.getComment};this.postComment(e).then(function(e){t.setComment("")})},newContact:function(){var t=this;this.validateEmail(this.getContact.email)?this.findContact(this.getContact.email).then(function(e){t.postContact(t.CONTACT).then(function(e){t.displayDialogContact(!1,!1,!1,!0),t.setMovementResponsable(t.CR_HANDLER);var a=[{attr:"client",value:null!=e.user?e=e.user:e,second_level:"data"},{attr:"client",value:e.imgUrl?"User":"Contact",second_level:"type"}];a.forEach(function(e){t.setIncome(e)})})}):this.$toasted.show("Email invalido!",{type:"danger"})},handleOptionalEmailModal:function(t){this.handleOptionalEmail(t)},setOpcionalUser:function(t){this.OPTIONAL_USER.email=t.value},handleInputDisplay:function(t,e){this.getIncome._id?this.getIncome.editor==this.getUser._id?this.editorState(!0):this.editorState(!1):(this.editorState(!0),this.handleSeeDetails())},handleSeeDetails:function(){this.getEnableEdit&&this.showDetails(!0)},saveOptionalUser:function(){var t=this;this.setOptionalContact(this.OPTIONAL_USER),this.OPTIONAL_USER.email?(console.log("PAYLOAD ANTES DEL  SHARE_INCOME -> ",this.getIncome),this.shareIncome(this.getIncome).then(function(){t.handleOptionalEmailModal(!1),t.$toasted.show("Cotizacion enviada!")})):this.$toasted.show("Ingresa un correo!",{type:"info"})},getUserImg:function(){return"income"==this.CR_HANDLER.type?this.INCOME.client.data&&this.INCOME.client.data.imgUrl?this.INCOME.client.data.imgUrl:a("986f"):this.getIncome._id?this.INCOME.client.data&&this.INCOME.client.data.imgUrl?this.INCOME.client.data.imgUrl:a("986f"):"User"==this.INCOME.responsable.type?(console.log("Entro en el segundo con user"),this.INCOME.responsable.data.imgUrl?this.INCOME.responsable.data.imgUrl:a("1b36")):(console.log("Entro en el segundo sin user"),a("986f"))},getUserName:function(){switch(this.CR_HANDLER.type){case"income":return this.INCOME[this.CR_HANDLER.receptor].type&&null!=this.INCOME[this.CR_HANDLER.receptor].type?this.INCOME[this.CR_HANDLER.receptor].data.name:this.INCOME[this.CR_HANDLER.receptor].name;case"outcome":return this.INCOME[this.CR_HANDLER.emisor].type&&null!=this.INCOME[this.CR_HANDLER.emisor].type?this.getIncome._id?this.INCOME[this.CR_HANDLER.emisor].data.name:this.INCOME[this.CR_HANDLER.receptor].data.name:this.INCOME[this.CR_HANDLER.emisor].name}},setInitial:function(t){this.initialObject=t},compareOnExit:function(t){o()(this.initialObject)===o()(this.INCOME)?console.log(""):this.getIncome._id&&this.saveIncome()},validateEmail:function(t){var e=/\S+@\S+\.\S+/;return e.test(t)},blurAction:function(t,e){var a=this;return console.log("sfds"),new c.a(function(e,i){console.log("blurEvent",t),a.findContact(a.getIncome.contactName).then(function(i){if(i)console.log(i),e(!0);else if(a.validateEmail(t)){var n=t.split("@");a.setContact({attr:"name",value:n[0]}),a.setContact({attr:"email",value:t}),a.postContact(a.CONTACT).then(function(t){a.displayDialogContact(!1,!1,!1,!0),a.setMovementResponsable(a.CR_HANDLER);var i=[{attr:"client",value:null!=t.user?t=t.user:t,second_level:"data"},{attr:"client",value:t.imgUrl?"User":"Contact",second_level:"type"}];i.forEach(function(t){a.setIncome(t)}),e(!0)})}else e(!0)})})},handleScroll:function(t){t.target.scrollTop>this.initialPosition?this.showBottomTotals(!1):t.target.scrollTop<this.initialPosition&&this.showBottomTotals(!0),this.initialPosition=t.target.scrollTop}}),created:function(){var t=this;this.inMobile=L["a"],this.acomplete.searchRoute=u["a"]+"/contacts/find/self/",this.$route.params.id?(this.loading=!0,this.getCurrentIncome(this.$route.params.id).then(function(e){t.showDetails(!1),t.handleInputDisplay(),t.loading=!1,t.setInitial(t.INCOME)})):(this.cleanIncome(),this.cleanItem(),this.showDetails(!0)),"Outcome"==this.$route.name&&this.hideShowBottom(!1),this.isSale?this.acomplete.placeholder_value="Cliente":this.acomplete.placeholder_value="Proveedor"},mounted:function(){this.acomplete.initialValue=this.INCOME_CLIENT},computed:Object(m["a"])({},Object(r["e"])({showTotals:function(t){return t.showTotals},showDialogMessage:function(t){return t.showDialogMessage},optionalEmail:function(t){return t.optionalEmail}}),Object(r["c"])({getIncome:"incomes/getIncome",getItem:"items/getItem",getContact:"contacts/getContact",getComment:"comments/getComment",getUser:"users/user",getEnableEdit:"getEnableEdit",getSeeDetails:"getSeeDetails",getSelectedItems:"items/getSelectedItems",getSelectedItemsAdd:"items/getSelectedItemsAdd",getUserLastItems:"items/getUserLastItems",getGlobalItemVars:"items/getGlobalItemVars",getShowDialogIncome:"getShowDialogIncome",getShowTotals:"getShowTotals",getCurrencyConfig:"getCurrencyConfig"}),{CR_HANDLER:function(){switch(this.$route.name){case"Income":return{emisor:"responsable",receptor:"client",type:"income"};case"Outcome":return{emisor:"client",receptor:"responsable",type:"outcome"};default:}},INCOME_CLIENT:function(){return this.getIncome[this.CR_HANDLER.receptor].type&&null!=this.getIncome[this.CR_HANDLER.receptor].type?this.getIncome[this.CR_HANDLER.receptor].data:this.getIncome._id?this.getIncome[this.CR_HANDLER.receptor].name:this.getIncome.contactName},INCOME_RESPONSABLE:function(){return this.getIncome[this.CR_HANDLER.emisor].type&&null!=this.getIncome[this.CR_HANDLER.emisor].type?this.getIncome[this.CR_HANDLER.emisor].data:this.$route.params.id?this.getIncome[this.CR_HANDLER.emisor].name:this.getIncome.contactName},INCOME:function(){return{_id:this.getIncome._id,name:this.getIncome.name,description:this.getIncome.description,dates:{expiration:null},creator:this.getIncome.creator,contactName:this.getIncome.client.name?this.getIncome.client.name:null,client:this.getIncome[this.CR_HANDLER.receptor].type&&null!=this.getIncome[this.CR_HANDLER.receptor].type?{type:this.getIncome[this.CR_HANDLER.receptor].type,data:this.INCOME_CLIENT}:{name:this.INCOME_CLIENT},responsable:this.getIncome[this.CR_HANDLER.emisor].type&&null!=this.getIncome[this.CR_HANDLER.emisor].type?{type:this.getIncome[this.CR_HANDLER.emisor].type,data:this.INCOME_RESPONSABLE}:{name:this.INCOME_RESPONSABLE},editor:"income"==this.CR_HANDLER.type?this.INCOME_RESPONSABLE:this.INCOME_CLIENT,lines:[],total:{net:0,tax:0},state:"draft",isActive:!0,currency:null}},OPTIONAL_USER:function(){return{name:"income"==this.CR_HANDLER.type?this.getIncome.client.name:this.getIncome.responsable.name,email:null}},CONTACT:function(){return{creator:this.getContact.creator,email:this.getContact.email,isActive:!0,name:this.getContact.name,phone:this.getContact.phone,user:this.getContact.user}},TOTAL:function(){var t=_.sumBy(this.getIncome.lines,function(t){return t.price*t.quantity});return{net:t,tax:.19*t,total:.19*t+t}}}),watch:{INCOME_CLIENT:function(t){console.log("this.INCOME_CLIENT -> ",this.INCOME_CLIENT),console.log("this.INCOME_RESPONSABLE -> ",this.INCOME_RESPONSABLE),t&&(t.name?this.acomplete.initialValue=t.name:this.acomplete.initialValue=t)}},beforeRouteEnter:function(t,e,a){d["a"].commit("HIDE_SHOW_BOTTOM",!1),d["a"].commit("HIDE_SHOW_TOTALS",!0),d["a"].commit("HIDE_SHOW_NAVBAR",!1),a()},beforeRouteLeave:function(t,e,a){d["a"].commit("HIDE_SHOW_BOTTOM",!0),d["a"].commit("HIDE_SHOW_TOTALS",!1),d["a"].commit("HIDE_SHOW_NAVBAR",!0),this.compareOnExit(),a()}},U=z,P=(a("8233"),Object(v["a"])(U,i,n,!1,null,"43ec773a",null));e["default"]=P.exports}}]);
//# sourceMappingURL=chunk-4b7b.7eac509b.js.map